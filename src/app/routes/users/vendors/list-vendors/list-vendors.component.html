<div id="vendor-listing">
  <div class="content-heading">
    <!-- Breadcrumb right aligned-->
    <breadcrumb class="col-12 col-sm-8 col-md-8 col-lg-8 col-xl-8 no-mg" [breadcrumbData]="breadcrumbData"></breadcrumb>

    <div class="col-12 col-sm-4 col-md-4 col-lg-4 col-xl-4 text-right no-mg">
      <action-permission [actionType]="ACTION_TYPES.ADD" [MODULE_ID]="MODULE_ID" [permissionArr]="permissionObject">
        <button mat-button class="btn btn-primary add-btn" [routerLink]="ROUTER_LINKS_FULL_PATH.addVendor"
          type="button">
          {{'common.labels.add'| translate}}</button>
      </action-permission>
    </div>
  </div>
  <div class="card card-default list-vendor-page">
    <div class="card-body">
      <form [formGroup]="vendorsFilterForm">
        <div class="row mb-3">
          <div class="col-12 col-sm-3 col-md-3 col-lg-3 col-xl-3 mb-10">
            <input class="form-control" formControlName="name" id="name" type="text"
              placeholder="{{'common.labels.commercialName'| translate}}" data-toggle="tooltip" data-placement="top"
              title="{{'common.labels.commercialName'| translate}}" />
          </div>
          <div class="col-12 col-sm-3 col-md-3 col-lg-3 col-xl-3 mb-10">
            <input class="form-control" formControlName="email" id="email" type="text"
              placeholder="{{'common.labels.email'| translate}}" data-toggle="tooltip" data-placement="top"
              title="{{'common.labels.email'| translate}}" />
          </div>
          <div class="col-12 col-sm-3 col-md-3 col-lg-3 col-xl-3 mb-10">
            <input class="form-control" formControlName="electronicIdNumber" id="electronicNumber" type="text"
              placeholder="{{'common.labels.electronicIdNumber'| translate}}" data-toggle="tooltip" data-placement="top"
              title="{{'common.labels.electronicIdNumber'| translate}}" />
          </div>
          <div class="col-12 col-sm-3 col-md-3 col-lg-3 col-xl-3 mb-10">
            <ngx-select [allowClear]="true" [items]="CONTRACT_STATUS" formControlName="contract"
              placeholder="{{'common.labels.contractStatus' | translate}}" data-toggle="tooltip" data-placement="top"
              title="{{'common.labels.contractStatus' | translate}}">
            </ngx-select>
          </div>
        </div>

        <div class="row mb-3">
          <div class="col-12 col-sm-3 col-md-3 col-lg-3 col-xl-3 mb-10">
            <ngx-select [allowClear]="true" [items]="VENDOR_TYPE" formControlName="vendorType"
              placeholder="{{'actors.vendors.labels.vendorType'| translate}}" data-toggle="tooltip" data-placement="top"
              title="{{'actors.vendors.labels.vendorType'| translate}}">
            </ngx-select>
          </div>
          <div class="col-12 col-sm-3 col-md-3 col-lg-3 col-xl-3 mb-10">
            <ngx-select [allowClear]="true" [items]="projectType" (remove)="getCatgory()" (select)="getCatgory($event)"
              formControlName="projectType" placeholder="{{'common.labels.projectType'| translate}}"
              data-toggle="tooltip" data-placement="top" title="{{'common.labels.projectType'| translate}}">
            </ngx-select>
          </div>

          <div class="col-12 col-sm-3 col-md-3 col-lg-3 col-xl-3 mb-10">
            <ngx-select [allowClear]="true" [items]="category" formControlName="category"
              placeholder="{{'common.labels.category'| translate}}" data-toggle="tooltip" data-placement="top"
              title="{{'common.labels.category'| translate}}">
            </ngx-select>
            <!-- <div class="text-danger col-md-12 no-mg mb-3" style="margin-top:-5%" *ngIf="!vendorsFilterForm.value.projectType && vendorsFilterForm.controls['category'].touched">{{'common.errorMessages.selectProjectType'| translate}}</div> -->
          </div>
          <div class="col-12 col-sm-5 col-md-4 col-lg-3 col-xl-3">
            <button mat-button class="btn btn-primary  search-btn mb-10" [disabled]="showLoadingFlg" (click)="search()"
              type="button">
              {{'common.labels.search'| translate}}</button>
            <button mat-button class="btn btn-primary  clear-btn mb-10" [disabled]="showLoadingFlg" (click)=clear();
              type="button"> {{'common.labels.clear'| translate}}</button>
          </div>
        </div>
      </form>
      <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 no-pd">
        <app-loader class="col-md-12" [loading]="showLoadingFlg"></app-loader>
        <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 table-responsive no-pd"
          [ngClass]="{'hide-content': showLoadingFlg}">
          <table class=" table table-striped table-bordered table-hover">
            <thead>
              <tr>
                <th class="">{{'common.labels.hash'| translate}}</th>
                <th class="">{{'actors.vendors.labels.comName' | translate}}</th>
                <th class="">{{'common.labels.email' | translate}}</th>
                <th class="">{{'actors.vendors.labels.vendorType' | translate}}</th>
                <th class="">{{'common.labels.electronicIdNumber' | translate}}</th>
                <th class="">{{'common.labels.contractStatus' | translate}}</th>
                <th class="text-center">{{'common.labels.action' | translate}}</th>
              </tr>
            </thead>

            <tbody>
              <ng-container *ngIf="vendorList?.length == 0">
                <tr>
                  <td colspan="12">
                    <p class="text-danger text-center">{{'common.labels.noRecord' | translate}}</p>
                  </td>
                </tr>
              </ng-container>
              <tr *ngFor="let vendor of vendorList;let i=index">
                <td>{{i+index}}</td>
                <td>{{vendor?.i18n?.commercialName}}</td>
                <td>{{vendor?.emailId}}</td>
                <td *ngIf="vendor?.type == 1">Individual</td>
                <td *ngIf="!vendor?.type">-</td>
                <td *ngIf="vendor?.type == 2">Company</td>
                <td>{{vendor?.electronicIDNumber}}</td>
                <td>
                  <ng-container *ngIf="vendor?.contracts[0]?.fileUrl else elseBlock">
                    <a target="_blank" href="{{vendor?.contracts[0]?.fileUrl}}"
                      download="{{vendor?.contracts[0]?.fileUrl}}" *ngIf="vendor?.contracts[0]">
                      <i class="fa fa-file-excel-o"
                        [ngClass]="vendor.contracts[0]?.status == 1 ? 'c-green' : 'c-red'"></i>
                    </a>
                  </ng-container>
                  <ng-template #elseBlock>
                    <span>-</span>
                  </ng-template>
                </td>
                <td class="center">
                  <div class="d-inline-flex">
                    <action-permission [actionType]="ACTION_TYPES.EDIT" [MODULE_ID]="MODULE_ID"
                      [permissionArr]="permissionObject">
                      <i style="cursor: pointer;" class="edit fa fa-edit edit-ico edit-icon f-17 mr-5"
                        (click)="editVendor(vendor.id)"></i>
                    </action-permission>
                    <label class="switch switch-md">
                      <input type="checkbox" [checked]="vendor.status === 1"
                        (change)="openSwapPopUp($event, i, vendor)" />
                      <span></span>
                    </label>
                  </div>
                  <!-- <i class="fa fa-toggle-on arrow f-18" (click)="changeStatus(freelancer?.id,freelancer?.status)"></i> -->
                </td>
              </tr>
            </tbody>
          </table>

        </div>
      </div>

    </div>
    <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12" *ngIf="totalItems>itemsPerPage"
      [ngClass]="{'hide-content': showLoadingFlg}">
      <pagination *ngIf="config.paging" class="pagination-sm pull-right" [(ngModel)]="currentPage"
        [totalItems]="totalItems" [itemsPerPage]="itemsPerPage" [firstText]="'common.labels.first' | translate"
        [lastText]="'common.labels.last' | translate" [previousText]="'common.labels.previous' | translate"
        [nextText]="'common.labels.next' | translate" [maxSize]="maxSize" [boundaryLinks]="true" [rotate]="false"
        (pageChanged)="pageChanged($event)" (numPages)="numPages = $event">
      </pagination>
    </div>

  </div>
</div>