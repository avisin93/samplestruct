<nav class="navbar navbar-expand-sm bg-dark navbar-dark fixed-top">
  <a class="navbar-brand" href="#">Logo</a>
  <ul class="navbar-nav">
    <li class="nav-item">
      <a class="nav-link" href="#">Link</a>
    </li>
    <li class="nav-item">
      <a class="nav-link" href="#">Link</a>
    </li>
  </ul>
</nav>

<div id="add-vendor-page">
  <div class="content-heading">
    <!-- Breadcrumb right aligned-->
    <breadcrumb class="col-12 col-sm-8 col-md-8 col-lg-8 col-xl-8 no-mg" [breadcrumbData]="breadcrumbData"></breadcrumb>
  </div>

  <div class="container-fluid add-vendor-page">
    <form class="form-horizontal" [formGroup]="manageVendorForm" novalidate>
      <div class="row no-mg">
        <div class="row col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 no-mg">

          <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 no-mg">
            <!-- <div class="panel-heading"> -->
            <h5 class="text-dark">
              <strong>{{'actors.vendors.labels.personalDetails'| translate}}</strong>
              <em class="pull-right mandatory">*{{'common.labels.mandatory'| translate}}</em>
            </h5>
            <!-- </div> -->
            <div class="panel panel-primary">
              <div class="panel-body">
                <div class="form-group">
                  <label class="col-12 col-sm-12 col-md-8 col-lg-8 col-xl-8 control-label">{{'actors.vendors.labels.comName'|
                    translate}}
                    <span class="bb-error"> *</span>
                  </label>
                  <div class="col-12 col-sm-12 col-md-8 col-lg-8 col-xl-8">
                    <input class="form-control" type="text" required formControlName="companyName" placeholder="{{'actors.vendors.labels.comName'| translate}}">
                    <div class=" bb-error" *ngIf="manageVendorForm.controls['companyName']?.errors?.checkRequired && (manageVendorForm.controls['companyName'].touched || submitVendorForm)">{{'pages.errorMessages.fieldRequired'|
                      translate}}</div>
                  </div>
                </div>

                <div class="form-group">
                  <label class="col-12 col-sm-12 col-md-8 col-lg-8 col-xl-8 control-label">{{'actors.vendors.labels.email'|
                    translate}}
                    <span class="bb-error"> *</span>
                  </label>
                  <div class="col-12 col-sm-12 col-md-8 col-lg-8 col-xl-8">
                    <input class="form-control" type="text" oninput="this.value = this.value.replace(/[^@a-zA-Z0-9._-]/g, '');"
                      required formControlName="email" (change)="changeEmailFormat()" placeholder="{{'actors.vendors.labels.email'| translate}}">
                    <div class="bb-error" *ngIf="manageVendorForm.controls['email']?.errors?.checkRequired && (manageVendorForm.controls['email'].touched || submitVendorForm)">{{'pages.errorMessages.fieldRequired'|
                      translate}}</div>
                    <div class="bb-error" *ngIf="!manageVendorForm.controls['email']?.errors?.checkRequired && manageVendorForm.controls['email']?.errors?.checkEmail && (manageVendorForm.controls['email'].touched || submitVendorForm) && manageVendorForm.controls['email'].dirty">{{'pages.errorMessages.invalidEmail'|
                      translate}}</div>
                  </div>
                </div>

                <div class="form-group">
                  <label class="col-12 col-sm-12 col-md-8 col-lg-8 col-xl-8 control-label">{{'actors.vendors.labels.classification'|
                    translate}}
                    <span class="bb-error"> *</span>
                  </label>
                  <div class="col-12 col-sm-12 col-md-8 col-lg-8 col-xl-8">
                    <ngx-select [items]="CLASSIFICATION" [allowClear] = "true" formControlName="classification" placeholder="{{'common.labels.select' | translate}}">
                    </ngx-select>
                    <!-- <select class="form-control" name="classification" formControlName="classification">
                    <option value="">Select</option>
                    <option *ngFor="let level of CLASSIFICATION" [value]="level.value">{{level.label}}</option>
                  </select> -->
                    <div class="bb-error" *ngIf="manageVendorForm.controls['classification']?.errors?.checkRequired && (manageVendorForm.controls['classification'].touched || submitVendorForm)">{{'pages.errorMessages.fieldRequired'|
                      translate}}</div>
                  </div>
                </div>
                <!-- <div class="form-group">
                  <label [ngClass]="vendorID == undefined ? 'col-md-12 col-xs-12 col-sm-9 control-label' : 'col-md-3 col-xs-12 col-sm-9 control-label'">{{'actors.vendors.labels.vendorType'| translate}}
                    <span class="bb-error"> *</span>
                  </label>
                  <div [ngClass]="vendorID == undefined ? 'col-md-8 col-xs-12 col-sm-9' : 'col-md-9 col-xs-12 col-sm-9'">
                    <select class="form-control" name="roleId" formControlName="vendorType">
                      <option value="">Select</option>
                      <option *ngFor="let role of CLASSIFICATION" value="role.id">{{role.label}}</option>
                    </select>
                    <div class="bb-error" *ngIf="manageVendorForm.controls['vendorType']?.errors?.checkRequired && (manageVendorForm.controls['vendorType'].touched || submitVendorForm)">{{'pages.errorMessages.fieldRequired'| translate}}</div>
                  </div>
                </div> -->

              </div>
            </div>
          </div>


        </div>

        <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 no-mg">
          <!-- <div class="panel-heading"> -->
          <h5 class="text-dark">
            <strong>{{'actors.vendors.labels.financial'| translate}}</strong>

          </h5>
          <!-- </div> -->
          <div class="panel panel-primary">
            <div class="panel-body">


              <!-- <div class="row no-mg">
                <div class="col-md-12 no-mg"> -->
              <div class="form-group">
                <label class="col-12 col-sm-12 col-md-8 col-lg-8 col-xl-8 control-label">{{'common.labels.currency' |
                  translate}}
                  <span class="bb-error"> *</span>
                </label>
                <div class="col-12 col-sm-12 col-md-8 col-lg-8 col-xl-8">
                  <ngx-select [items]="currency" [allowClear] = "true" formControlName="currency" placeholder="{{'common.labels.select' | translate}}">
                  </ngx-select>
                  <!-- <select class="form-control" name="operation" formControlName="currency">
                        <option value="">Select</option>

                        <ng-container *ngFor="let currency of currencyDropdown;let i = index;">
                          <option [value]="currency.id">{{currency.i18n.name}}</option>
                        </ng-container>
                      </select> -->
                  <div class="bb-error" *ngIf="manageVendorForm.controls['currency']?.errors?.checkRequired &&  (manageVendorForm.controls['currency'].touched  || submitVendorForm)">{{'pages.errorMessages.fieldRequired'|
                    translate}}</div>
                </div>
              </div>
              <!-- </div>
              </div> -->
              <div class="form-group">
                <label class="col-12 col-sm-12 col-md-8 col-lg-8 col-xl-8 control-label">{{'common.labels.mode' |
                  translate}}
                  <span class="bb-error"> *</span>
                </label>
                <div class="col-12 col-sm-12 col-md-8 col-lg-8 col-xl-8">
                  <ngx-select [items]="operation" [allowClear] = "true" formControlName="mode" placeholder="{{'common.labels.select' | translate}}">
                  </ngx-select>
                  <!-- <select class="form-control" name="operation" formControlName="mode">
                  <option value="">Select</option>

                  <ng-container *ngFor="let mode of operationDropdown;let i = index;">
                    <option [value]="mode.id">{{mode.i18n.name}}</option>
                  </ng-container>
                </select> -->
                  <div class="bb-error" *ngIf="manageVendorForm.controls['mode']?.errors?.checkRequired &&  (manageVendorForm.controls['mode'].touched  || submitVendorForm)">{{'pages.errorMessages.fieldRequired'|
                    translate}}</div>
                </div>
              </div>
              <div class="col-12 col-sm-12 col-md-8 col-lg-8 col-xl-8">
                <div class="checkbox c-checkbox">
                  <label>
                    <input type="checkbox" formControlName="thirdParty">
                    <span class="fa fa-check"></span>
                    {{'actors.vendors.labels.thirdParty'| translate}}

                  </label>
                </div>
              </div>
            </div>
          </div>

        </div>

        <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 no-mg">
          <h5 class="text-dark">
            <strong>{{'actors.vendors.labels.project'| translate}}</strong>

          </h5>


          <div class="card card-transparent">
            <tabset class="bg-white p-0" justified="true">
              <tab *ngFor="let tab of tabs;let tabIndex=index" (select)="showHideFloatingButtons(50)">
                <ng-template tabHeading>
                  {{tab.name | translate}}
                </ng-template>
                <div class="min-ht">
                  <ng-container *ngIf="showLoadingFlg">
                    <app-loader class="col-md-12" [loading]="showLoadingFlg"></app-loader>

                  </ng-container>
                  <table id="category-table" class="table table-bordered" *ngIf=" tab?.categories.length > 0" [ngClass]="{'hide-content': showLoadingFlg}">
                    <thead>
                      <tr>
                        <th>{{'projects.labels.budgetLine'| translate}}</th>
                        <th>{{'common.labels.category'| translate}}</th>
                      </tr>
                    </thead>
                    <tbody class="text-center">
                      <ng-container *ngFor="let category of tab?.categories;let i = index;">
                        <tr [attr.cat]="category.id">
                          <td>{{category?.budgetLine}}</td>
                          <td class="category-name c-pointer id_{{category.id}}" (click)="selectCategories(category.id,tabIndex,'category_cell_',(category?.accounts ? false:true), '','category')"
                            [ngClass]="'category_cell_'+category.id">
                            <ng-container *ngIf="category?.accounts">
                              <span class="expander">
                                <i class="category-plus fa fa-plus-circle" [ngClass]="'category_'+category.id" (click)="subMenuShow(category.id, 'show',$event)"></i>
                              </span>
                              <span class="expander">
                                <i class="category-minus fa fa-minus-circle" [ngClass]="'category_'+category.id"
                                  (click)="subMenuShow(category.id, 'hide',$event)"></i>
                              </span>
                            </ng-container>
                            <span> {{category?.i18n?.mappingName}}</span>
                            <i class="fa fa-check pull-right"></i>
                          </td>

                        </tr>
                        <ng-container *ngIf="category?.accounts">
                          <ng-container *ngFor="let subCategory of category?.accounts;let subIndex = index;">
                            <tr class="sub-category sub-category_{{category.id}}" [ngClass]="subCategory?.accounts?.length > 0 ? 'parent-node':'' "
                              [attr.cat]="category.id" [attr.account]="subCategory.id">
                              <td>{{subCategory?.budgetLine}}</td>
                              <td class="subcategory-name c-pointer id_{{subCategory.id}} pl-60" [ngClass]="'sub_category_cell_'+subCategory.id"
                                (click)="selectCategories(subCategory.id,tabIndex,'sub_category_cell_',(subCategory?.accounts ? false:true),category.id, 'account')">
                                <ng-container *ngIf="subCategory?.accounts">
                                  <span class="expander">
                                    <i class="category-plus fa fa-plus-circle category-plus_{{category.id}}" [ngClass]="'category_'+subCategory.id"
                                      (click)="subSubMenuShow(subCategory.id, 'show',$event)"></i>
                                  </span>
                                  <span class="expander">
                                    <i class="category-minus fa fa-minus-circle category-minus_{{category.id}}"
                                      [ngClass]="'category_'+subCategory.id" (click)="subSubMenuShow(subCategory.id, 'hide',$event)"></i>
                                  </span>
                                </ng-container>
                                <span> {{subCategory?.i18n?.mappingName}}</span>
                                <i class="fa fa-check pull-right"></i>
                              </td>
                            </tr>

                            <ng-container *ngFor="let subSubCategory of subCategory?.accounts;let subSubIndex = index;">
                              <tr class="sub-sub-category sub-sub-category_{{subCategory.id}} sub-sub-category_{{category.id}}"
                                [attr.cat]="category.id" [attr.account]="subCategory.id" [attr.sub_account]="subSubCategory.id">
                                <td>{{subSubCategory?.budgetLine}}</td>
                                <td class="sub-sub-category-name c-pointer id_{{subSubCategory.id}} pl-80" (click)="selectCategories(subSubCategory.id,tabIndex,'sub_sub_category_cell_',true, '', 'subAccount')"
                                  [ngClass]="'sub_sub_category_cell_'+subSubCategory.id">
                                  <span> {{subSubCategory?.i18n?.mappingName}}</span>
                                  <i class="fa fa-check pull-right"></i>
                                </td>
                              </tr>
                            </ng-container>

                          </ng-container>
                        </ng-container>
                      </ng-container>


                    </tbody>
                  </table>
                </div>
              </tab>
            </tabset>
          </div>


        </div>
        <div class="floating-btn" *ngIf="showFloatingBtn">

          <button (click)="addVendor()" [disabled]="disableButton" class="btn btn-success save-btn" type="submit">
            <i *ngIf="spinnerFlag" class="fa fa-spinner fa-spin margin-right-5"></i>{{'common.labels.save'| translate}}</button>
          <button class="btn btn-danger ml-1 cancel-btn"  type="button" [routerLink]="ROUTER_LINKS_FULL_PATH.vendors">{{'common.labels.cancel'|
            translate}}</button>

        </div>
        <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 mt-3 no-mg" id="fixed-btn">

          <button (click)="addVendor()"  type="submit" [disabled]="disableButton" class="btn btn-success save-btn">
            <i *ngIf="spinnerFlag" class="fa fa-spinner fa-spin margin-right-5"></i>{{'common.labels.save'| translate}}</button>
          <button type="button" class="btn btn-danger ml-1 cancel-btn" [routerLink]="ROUTER_LINKS_FULL_PATH.vendors">{{'common.labels.cancel'|
            translate}}</button>

        </div>
      </div>
    </form>
  </div>
</div>
