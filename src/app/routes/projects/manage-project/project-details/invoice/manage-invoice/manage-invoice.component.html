<div class="manage-invoice" id="manage-invoice">
  <ng-container *ngIf="!renderPage">
    <app-loader class="col-md-12" [loading]="!renderPage"></app-loader>
  </ng-container>

  <div class="panel panel-primary" *ngIf="renderPage">

    <div class="panel-body">
      <form [formGroup]="manageInvoiceForm" novalidate>
        <div class="form-group">
          <div class="row no-mg">
            <h5 *ngIf="!invoiceId" class="text-dark mt-1 col-12 col-sm-6 col-md-6 col-lg-6 col-xl-6">
              <strong>{{'projects.labels.addPaymentOrder'| translate}}</strong>
            </h5>
            <h5 *ngIf="invoiceId" class="text-dark mt-1 col-12 col-sm-6 col-md-6 col-lg-6 col-xl-6">
              <strong>{{'projects.labels.editPaymentOrder'| translate}}</strong>
            </h5>
            <div class="col-12 col-sm-6 col-md-6 col-lg-6 col-xl-6 text-right">
              <button class="btn btn-primary mr-3" (click)="navigateTo()" type="button">{{'common.labels.backToList'|
                translate}}
              </button>
            </div>
          </div>
        </div>
        <div class="form-group">
          <div class="row">
            <div class="col-md-4">
              <div class="col-md-12">
                <label>
                  {{'projects.labels.purchaseOrder'| translate}}#:
                </label>
                <strong>
                  {{poData ? poData.purchaseOrderNumber : '-' }}
                </strong>
              </div>
            </div>
            <div class="col-md-4">
              <div class="col-md-12">
                <label>
                  <a data-toggle="tooltip" data-placement="top" title="{{poData?.purchaseOrderFile?.name}}"
                    style="text-decoration:none;" href="{{poData?.purchaseOrderFile?.url}}">
                    <i class="fa fa-download mr-1"></i>
                    {{'projects.labels.purchaseOrder'| translate}} {{'projects.labels.download' | translate}}
                  </a>
                </label>
              </div>
            </div>
          </div>
        </div>
        <div class="form-group">
          <div class="row">
            <div class="col-md-4">
              <div class="col-md-12">
                <label>
                  {{'projects.labels.purchaseOrder'| translate}} {{'projects.labels.date'| translate}}:
                </label>
                {{poData?.orderDate | dateFormat}}
              </div>
            </div>

          </div>
        </div>
        <div class="form-group">
          <div class="row">
            <div class="col-md-4">
              <div class="col-md-12">
                <label>{{'common.labels.invoiceAmount'| translate}}:</label>
                <label>{{manageInvoiceForm.value?.purchaseOrderDate}}
                  <strong
                    class="ml-2">{{poData.totalAmountRequested ? (poData.totalAmountRequested | numberFormat) : '-'}}
                    {{poData.currencyCode?poData.currencyCode:'-'}}</strong>
                </label>
              </div>
            </div>

          </div>
        </div>
        <div class="form-group">
          <div class="row">
            <div class="col-md-4">
              <div class="col-md-12">
                <label>{{'projects.labels.budgetLine'| translate}} :</label>
                <strong class="ml-1">
                  <ng-container *ngFor="let item of poData.budgetLines;let lst = last">{{item}}<span
                      *ngIf="poData.budgetLines.length > 1 && !lst">,</span></ng-container>
                </strong>
              </div>
            </div>

          </div>
        </div>
        <div class="form-group">
          <div class="row">
            <div class="col-md-12">
              <div class="col-md-12">
                <label>{{'projects.labels.supplierName'| translate}} :</label>
                <strong class="ml-2">{{poData.i18n ? poData.i18n.name : '-'}}
                  <span *ngIf="poData.thirdPartyVendor">({{'projects.labels.thirdParty'| translate}} -
                    {{poData.thirdPartyVendor ? poData.thirdPartyVendor.name :
                    '-'}})
                  </span>
                </strong>
              </div>
            </div>

          </div>
        </div>
        <div class="form-group" *ngIf="poData?.purchaseOrderFor!= PURCHASE_ORDER_CONST.talent">
          <div class="row">
            <div class="col-md-4">
              <div class="col-md-12">
                <label>{{'payments.labels.vatPercent' | translate}} :</label>
                <strong class="ml-1">{{poData.percentVAT ? poData.percentVAT : '-'}}</strong>
              </div>
            </div>

          </div>
        </div>
        <div class="form-group">
          <div class="row">
            <div class="col-md-4">
              <div class="col-md-12" *ngIf="poData.purchaseOrderFor!==PURCHASE_ORDER_CONST.talent">
                <label>{{'common.labels.subTotal'| translate}}:</label>
                <strong class="ml-1">{{poData.subTotal ? (poData.subTotal | twoDecimal | numberFormat): '-'}}
                  {{poData.currencyCode?poData.currencyCode:'-'}}
                </strong>
              </div>
              <div class="col-md-12" *ngIf="poData.purchaseOrderFor==PURCHASE_ORDER_CONST.talent">
                <label>{{'common.labels.amount'| translate}}:</label>
                <strong class="ml-1">{{poTotalAmount ? (poTotalAmount | twoDecimal | numberFormat): '-'}}
                  {{poData.currencyCode?poData.currencyCode:'-'}}
                </strong>
              </div>
            </div>

          </div>
        </div>
        <div class="form-group" *ngIf="poData?.purchaseOrderFor!= PURCHASE_ORDER_CONST.talent">
          <div class="row">
            <div class="col-md-4">
              <div class="col-md-12">
                <label>{{'projects.labels.isrWithholding'| translate}} (%) :</label>
                <strong class="ml-1">{{poData.percentISRWithholding ? poData.percentISRWithholding: '-'}}</strong>
              </div>
            </div>
            <div class="col-md-4">
              <div class="col-md-12">
                <label>{{'common.labels.amount'| translate}} :
                </label>
                <strong>
                  {{(poData.totalAmountRequested && poData.percentISRWithholding) ? (((poData.totalAmountRequested *
                  poData.percentISRWithholding)/100)
                  | twoDecimal) :0.00}}
                </strong>

              </div>
            </div>
          </div>
        </div>
        <div class="form-group" *ngIf="poData?.purchaseOrderFor!== PURCHASE_ORDER_CONST.talent">
          <div class="row">
            <div class="col-md-4">
              <div class="col-md-12">
                <label>{{'projects.labels.vatWithholding'| translate}} (%) :</label>
                <strong class="ml-1">{{poData.percentVATWithholding ? poData.percentVATWithholding: '-'}}</strong>
              </div>
            </div>
            <div class="col-md-4">
              <div class="col-md-12">
                <label>{{'common.labels.amount'| translate}} :
                </label>
                <strong>
                  {{(poData.totalAmountRequested && poData.percentVATWithholding) ? (((poData.totalAmountRequested *
                  poData.percentVATWithholding)/100)
                  | twoDecimal) :0.00}}
                </strong>
              </div>
            </div>
          </div>
        </div>
        <div class="form-group">
          <div class="col-md-12">
            <h5>
              <strong>{{'projects.labels.payeeAccInfo'| translate}}</strong>
            </h5>
          </div>


          <ng-container formGroupName="freelancerPayeeInfo"
            *ngIf="poData?.payeeAccountInfoFor ==  PURCHASE_ORDER_TYPE.freelancer">
            <div class="form-group">
              <div class="row">

                <div class="col-md-4">
                  <label class="col-md-12 col-xs-12 col-sm-12">{{'actors.freelancers.labels.accNumber'| translate}}
                    <span style="color:red;">*</span>
                  </label>

                  <div class="col-md-12 col-lg-12">
                    <input class="form-control" oninput="this.value = this.value.replace(/[^0-9]/g, '');"
                      formControlName="accountNumber"
                      placeholder="{{'actors.freelancers.labels.accNumber'| translate}}" />
                    <div class="text-danger"
                      *ngIf="manageInvoiceForm.controls['freelancerPayeeInfo'].controls['accountNumber']?.errors?.checkRequired && (manageInvoiceForm.controls['freelancerPayeeInfo'].controls['accountNumber'].touched || submitInvoiceForm)">{{'pages.errorMessages.fieldRequired'|
                      translate}}
                    </div>
                  </div>

                </div>
                <div class="col-md-4">
                  <label class="col-md-12 col-xs-12 col-sm-12">{{'actors.freelancers.labels.bankname'| translate}}
                    <span style="color:red;">*</span>
                  </label>

                  <div class="col-md-12 col-lg-12">
                    <input class="form-control" formControlName="bankName"
                      placeholder="{{'actors.freelancers.labels.bankname'| translate}}" />
                    <div class="text-danger"
                      *ngIf="manageInvoiceForm.controls['freelancerPayeeInfo'].controls['bankName']?.errors?.checkRequired && (manageInvoiceForm.controls['freelancerPayeeInfo'].controls['bankName'].touched || submitInvoiceForm)">{{'pages.errorMessages.fieldRequired'|
                      translate}}
                    </div>
                  </div>

                </div>
              </div>
            </div>
            <div class="form-group">
              <div class="row">

                <div class="col-md-4">
                  <label class="col-md-12 col-xs-12 col-sm-12">{{'actors.freelancers.labels.clabe'| translate}}
                    <span style="color:red;">*</span>
                  </label>

                  <div class="col-md-12 col-lg-12">
                    <input class="form-control" formControlName="clabe"
                      oninput="this.value = this.value.replace(/[^0-9]/g, '');" OnlyNumber="true" maxlength="18"
                      minlength="18" placeholder="{{'actors.freelancers.labels.clabe'| translate}}" />
                    <div class="text-danger"
                      *ngIf="manageInvoiceForm.controls['freelancerPayeeInfo'].controls['clabe']?.errors && (manageInvoiceForm.controls['freelancerPayeeInfo'].controls['clabe'].touched || submitInvoiceForm)">{{'projects.labels.lengthMsg'
                      | translate}}</div>

                    <!-- <div class="text-danger" *ngIf="manageInvoiceForm.controls['freelancerPayeeInfo'].controls['clabe']?.errors?.checkRequired && (manageInvoiceForm.controls['freelancerPayeeInfo'].controls['clabe'].touched || submitInvoiceForm)">{{'pages.errorMessages.fieldRequired'|
                        translate}}
                      </div> -->

                    <div class="text-danger"
                      *ngIf="manageInvoiceForm.controls['freelancerPayeeInfo'].controls['clabe']?.errors?.checkRequired && submitInvoiceForm">{{'pages.errorMessages.fieldRequired'|
                      translate}}
                    </div>
                  </div>

                </div>
                <div class="col-md-4">
                  <label class="col-md-12 col-xs-12 col-sm-12">{{'actors.freelancers.labels.branch'| translate}}
                    <span style="color:red;">*</span>
                  </label>

                  <div class="col-md-12 col-lg-12">
                    <input class="form-control" formControlName="branch"
                      placeholder="{{'actors.freelancers.labels.branch'| translate}}" />
                    <div class="text-danger"
                      *ngIf="manageInvoiceForm.controls['freelancerPayeeInfo'].controls['branch']?.errors?.checkRequired && (manageInvoiceForm.controls['freelancerPayeeInfo'].controls['branch'].touched || submitInvoiceForm)">{{'pages.errorMessages.fieldRequired'|
                      translate}}
                    </div>
                  </div>

                </div>

              </div>
            </div>
            <div class="form-group">
              <div class="row">
                <div class="col-md-4">
                  <label class="col-md-12 col-xs-12 col-sm-12">{{'common.labels.taxIdRFC' | translate}}
                    <span style="color:red;">*</span>
                  </label>

                  <div class="col-md-12 col-lg-12">
                    <input class="form-control" formControlName="taxId"
                      placeholder="{{'common.labels.taxIdRFC'| translate}}" />
                    <div class="text-danger"
                      *ngIf="manageInvoiceForm.controls['freelancerPayeeInfo'].controls['taxId']?.errors?.checkRequired && (manageInvoiceForm.controls['freelancerPayeeInfo'].controls['taxId'].touched || submitInvoiceForm)">{{'pages.errorMessages.fieldRequired'|
                      translate}}
                    </div>
                  </div>

                </div>
                <div class="col-md-4">
                  <label class="col-md-12 col-xs-12 col-sm-12">{{'actors.freelancers.labels.address'| translate}}
                    <span style="color:red;">*</span>
                  </label>

                  <div class="col-md-12 col-lg-12">
                    <!-- <input class="form-control" formControlName="address"
                      placeholder="{{'actors.freelancers.labels.address'| translate}}" /> -->
                    <textarea name="address" class="form-control" formControlName="address"
                      placeholder="{{'talent.individuals.labels.address' | translate}}"></textarea>
                    <div class="text-danger"
                      *ngIf="manageInvoiceForm.controls['freelancerPayeeInfo'].controls['address']?.errors?.checkRequired && (manageInvoiceForm.controls['freelancerPayeeInfo'].controls['address'].touched || submitInvoiceForm)">{{'pages.errorMessages.fieldRequired'|
                      translate}}
                    </div>
                  </div>

                </div>
              </div>
            </div>

          </ng-container>
          <ng-container formGroupName="vendorPayeeInfo"
            *ngIf="poData?.payeeAccountInfoFor ==  PURCHASE_ORDER_TYPE.vendor">
            <div class="form-group">
              <div class="row">
                <div class="col-md-4">
                  <label class="col-md-12 col-xs-12 col-sm-12">{{'projects.labels.accountName'| translate}}
                    <span style="color:red;">*</span>
                  </label>

                  <div class="col-md-12 col-lg-12">
                    <input class="form-control" formControlName="accountName"
                      placeholder="{{'projects.labels.accountName'| translate}}" />
                    <div class="text-danger"
                      *ngIf="manageInvoiceForm.controls['vendorPayeeInfo'].controls['accountName']?.errors?.checkRequired && (manageInvoiceForm.controls['vendorPayeeInfo'].controls['accountName'].touched || submitInvoiceForm)">{{'pages.errorMessages.fieldRequired'|
                      translate}}
                    </div>
                  </div>

                </div>
                <div class="col-md-4">
                  <label class="col-md-12 col-xs-12 col-sm-12">{{'actors.freelancers.labels.accNumber'| translate}}
                    <span style="color:red;">*</span>
                  </label>

                  <div class="col-md-12 col-lg-12">
                    <input class="form-control" oninput="this.value = this.value.replace(/[^0-9]/g, '');"
                      formControlName="accountNumber"
                      placeholder="{{'actors.freelancers.labels.accNumber'| translate}}" />
                    <div class="text-danger"
                      *ngIf="manageInvoiceForm.controls['vendorPayeeInfo'].controls['accountNumber']?.errors?.checkRequired && (manageInvoiceForm.controls['vendorPayeeInfo'].controls['accountNumber'].touched || submitInvoiceForm)">{{'pages.errorMessages.fieldRequired'|
                      translate}}
                    </div>
                  </div>

                </div>
              </div>
            </div>
            <div class="form-group">
              <div class="row">
                <div class="col-md-4">
                  <label class="col-md-12 col-xs-12 col-sm-12">{{'actors.freelancers.labels.bankname'| translate}}
                    <span style="color:red;">*</span>
                  </label>

                  <div class="col-md-12 col-lg-12">
                    <input class="form-control" formControlName="bankName"
                      placeholder="{{'actors.freelancers.labels.bankname'| translate}}" />
                    <div class="text-danger"
                      *ngIf="manageInvoiceForm.controls['vendorPayeeInfo'].controls['bankName']?.errors?.checkRequired && (manageInvoiceForm.controls['vendorPayeeInfo'].controls['bankName'].touched || submitInvoiceForm)">{{'pages.errorMessages.fieldRequired'|
                      translate}}
                    </div>
                  </div>

                </div>
                <div class="col-md-4">
                  <label class="col-md-12 col-xs-12 col-sm-12">{{'actors.freelancers.labels.branch'| translate}}
                    <span style="color:red;">*</span>
                  </label>

                  <div class="col-md-12 col-lg-12">
                    <input class="form-control" formControlName="branch"
                      placeholder="{{'actors.freelancers.labels.branch'| translate}}" />
                    <div class="text-danger"
                      *ngIf="manageInvoiceForm.controls['vendorPayeeInfo'].controls['branch']?.errors?.checkRequired && (manageInvoiceForm.controls['vendorPayeeInfo'].controls['branch'].touched || submitInvoiceForm)">{{'pages.errorMessages.fieldRequired'|
                      translate}}
                    </div>
                  </div>

                </div>
              </div>
            </div>
            <ng-container *ngIf="poData?.paymentType == PAYMENT_TYPES_CONST.domestic">
              <div class="form-group">
                <div class="row">
                  <div class="col-md-4">
                    <label class="col-md-12 col-xs-12 col-sm-12">{{'common.labels.taxIdRFC' | translate}}
                      <span style="color:red;">*</span>
                    </label>

                    <div class="col-md-12 col-lg-12">
                      <input class="form-control" formControlName="taxId"
                        placeholder="{{'common.labels.taxIdRFC' | translate}}" />
                      <div class="text-danger"
                        *ngIf="manageInvoiceForm.controls['vendorPayeeInfo'].controls['taxId']?.errors?.checkRequired && (manageInvoiceForm.controls['vendorPayeeInfo'].controls['taxId'].touched || submitInvoiceForm)">{{'pages.errorMessages.fieldRequired'|
                        translate}}
                      </div>
                    </div>

                  </div>
                  <div class="col-md-4">
                    <label class="col-md-12 col-xs-12 col-sm-12">{{'actors.freelancers.labels.clabe'| translate}}
                      <span style="color:red;">*</span>
                    </label>

                    <div class="col-md-12 col-lg-12">
                      <input class="form-control" formControlName="clabe"
                        oninput="this.value = this.value.replace(/[^0-9]/g, '');" minlength="18" maxlength="18"
                        placeholder="{{'actors.freelancers.labels.clabe'| translate}}" />
                      <div class="text-danger"
                        *ngIf="manageInvoiceForm.controls['vendorPayeeInfo'].controls['clabe']?.errors && (manageInvoiceForm.controls['vendorPayeeInfo'].controls['clabe'].touched || submitInvoiceForm)">{{'projects.labels.lengthMsg'
                        | translate}}</div>
                      <div class="text-danger"
                        *ngIf="manageInvoiceForm.controls['vendorPayeeInfo'].controls['clabe']?.errors?.checkRequired && (manageInvoiceForm.controls['vendorPayeeInfo'].controls['clabe'].touched || submitInvoiceForm)">{{'pages.errorMessages.fieldRequired'|
                        translate}}
                      </div>
                    </div>

                  </div>
                </div>
              </div>

            </ng-container>
            <ng-container *ngIf="poData?.paymentType == PAYMENT_TYPES_CONST.international">
              <div class="form-group">
                <div class="row">

                  <div class="col-md-4">
                    <label class="col-md-12 col-xs-12 col-sm-12">{{'actors.vendors.labels.swiftCode'| translate}}
                      <span style="color:red;">*</span>
                    </label>

                    <div class="col-md-12 col-lg-12">
                      <input class="form-control" formControlName="swiftCode"
                        placeholder="{{'actors.vendors.labels.swiftCode'| translate}}" />
                      <div class="text-danger"
                        *ngIf="manageInvoiceForm.controls['vendorPayeeInfo'].controls['swiftCode']?.errors?.checkRequired && (manageInvoiceForm.controls['vendorPayeeInfo'].controls['swiftCode'].touched || submitInvoiceForm)">{{'pages.errorMessages.fieldRequired'|
                        translate}}
                      </div>
                    </div>

                  </div>

                  <div class="col-md-4">
                    <label class="col-md-12 col-xs-12 col-sm-12">{{'actors.vendors.labels.ABAcode'| translate}}
                      <span style="color:red;">*</span>
                    </label>

                    <div class="col-md-12 col-lg-12">
                      <input class="form-control" formControlName="abaCode"
                        placeholder="{{'actors.vendors.labels.ABAcode'| translate}}" />
                      <div class="text-danger"
                        *ngIf="manageInvoiceForm.controls['vendorPayeeInfo'].controls['abaCode']?.errors?.checkRequired && (manageInvoiceForm.controls['vendorPayeeInfo'].controls['abaCode'].touched || submitInvoiceForm)">{{'pages.errorMessages.fieldRequired'|
                        translate}}
                      </div>
                    </div>

                  </div>
                </div>
              </div>
            </ng-container>
            <div class="form-group">
              <div class="row">
                <ng-container *ngIf="poData?.paymentType == PAYMENT_TYPES_CONST.domestic">
                  <div class="col-md-4">
                    <label class="col-md-12 col-xs-12 col-sm-12">{{'actors.vendors.labels.sortCode'| translate}}
                      <span style="color:red;">*</span>
                    </label>

                    <div class="col-md-12 col-lg-12">
                      <input class="form-control" formControlName="sortCode"
                        placeholder="{{'actors.vendors.labels.sortCode'| translate}}" />
                      <div class="text-danger"
                        *ngIf="manageInvoiceForm.controls['vendorPayeeInfo'].controls['sortCode']?.errors?.checkRequired && (manageInvoiceForm.controls['vendorPayeeInfo'].controls['sortCode'].touched || submitInvoiceForm)">{{'pages.errorMessages.fieldRequired'|
                        translate}}
                      </div>
                    </div>

                  </div>
                </ng-container>
                <div class="col-md-4">
                  <label class="col-md-12 col-xs-12 col-sm-12">{{'common.labels.mode'| translate}}
                    <span style="color:red;">*</span>
                  </label>

                  <div class="col-md-12 col-lg-12">
                    <ngx-select [items]="operation" [allowClear]="true" formControlName="mode"
                      placeholder="{{'common.labels.mode'| translate}}">
                    </ngx-select>
                    <div class="text-danger"
                      *ngIf="manageInvoiceForm.controls['vendorPayeeInfo'].controls['mode']?.errors?.checkRequired && (manageInvoiceForm.controls['vendorPayeeInfo'].controls['mode'].touched || submitInvoiceForm)">{{'pages.errorMessages.fieldRequired'|
                      translate}}
                    </div>
                  </div>

                </div>
              </div>
            </div>
          </ng-container>
          <ng-container formGroupName="talentPayeeInfo" *ngIf="poData?.purchaseOrderFor ==  PURCHASE_ORDER_TYPE.talent">
            <div class="form-group">
              <div class="row">


                <div class="col-md-4">
                  <label class="col-md-12 col-xs-12 col-sm-12">{{'projects.labels.accountName'| translate}}
                    <span style="color:red;">*</span>
                  </label>

                  <div class="col-md-12 col-lg-12">
                    <input class="form-control" formControlName="accountName"
                      placeholder="{{'projects.labels.accountName'| translate}}" />
                    <div class="text-danger"
                      *ngIf="manageInvoiceForm.controls['talentPayeeInfo'].controls['accountName']?.errors?.checkRequired && (manageInvoiceForm.controls['talentPayeeInfo'].controls['accountName'].touched || submitInvoiceForm)">{{'pages.errorMessages.fieldRequired'|
                      translate}}
                    </div>
                  </div>

                </div>
                <div class="col-md-4">
                  <label class="col-md-12 col-xs-12 col-sm-12">{{'actors.freelancers.labels.accNumber'| translate}}
                    <span style="color:red;">*</span>
                  </label>

                  <div class="col-md-12 col-lg-12">
                    <input class="form-control" oninput="this.value = this.value.replace(/[^0-9]/g, '');"
                      formControlName="accountNumber"
                      placeholder="{{'actors.freelancers.labels.accNumber'| translate}}" />
                    <div class="text-danger"
                      *ngIf="manageInvoiceForm.controls['talentPayeeInfo'].controls['accountNumber']?.errors?.checkRequired && (manageInvoiceForm.controls['talentPayeeInfo'].controls['accountNumber'].touched || submitInvoiceForm)">{{'pages.errorMessages.fieldRequired'|
                        translate}}
                    </div>
                  </div>

                </div>

              </div>
            </div>
            <div class="form-group">
              <div class="row">
                <div class="col-md-4">
                  <label class="col-md-12 col-xs-12 col-sm-12">{{'actors.freelancers.labels.bankname'| translate}}
                    <span style="color:red;">*</span>
                  </label>

                  <div class="col-md-12 col-lg-12">
                    <input class="form-control" formControlName="bankName"
                      placeholder="{{'actors.freelancers.labels.bankname'| translate}}" />
                    <div class="text-danger"
                      *ngIf="manageInvoiceForm.controls['talentPayeeInfo'].controls['bankName']?.errors?.checkRequired && (manageInvoiceForm.controls['talentPayeeInfo'].controls['bankName'].touched || submitInvoiceForm)">{{'pages.errorMessages.fieldRequired'|
                      translate}}
                    </div>
                  </div>

                </div>
                <div class="col-md-4">
                  <label class="col-md-12 col-xs-12 col-sm-12">{{'actors.freelancers.labels.branch'| translate}}
                    <span style="color:red;">*</span>
                  </label>

                  <div class="col-md-12 col-lg-12">
                    <input class="form-control" formControlName="branch"
                      placeholder="{{'actors.freelancers.labels.branch'| translate}}" />
                    <div class="text-danger"
                      *ngIf="manageInvoiceForm.controls['talentPayeeInfo'].controls['branch']?.errors?.checkRequired && (manageInvoiceForm.controls['talentPayeeInfo'].controls['branch'].touched || submitInvoiceForm)">{{'pages.errorMessages.fieldRequired'|
                      translate}}
                    </div>
                  </div>

                </div>



              </div>
            </div>
            <div class="form-group">
              <div class="row">
                <div class="col-md-4">
                  <label class="col-md-12 col-xs-12 col-sm-12">{{'actors.freelancers.labels.clabe'| translate}}
                    <span style="color:red;">*</span>
                  </label>

                  <div class="col-md-12 col-lg-12">
                    <input class="form-control" formControlName="clabe"
                      oninput="this.value = this.value.replace(/[^0-9]/g, '');" OnlyNumber="true" maxlength="18"
                      minlength="18" placeholder="{{'actors.freelancers.labels.clabe'| translate}}" />
                    <div class="text-danger"
                      *ngIf="manageInvoiceForm.controls['talentPayeeInfo'].controls['clabe']?.errors && (manageInvoiceForm.controls['talentPayeeInfo'].controls['clabe'].touched || submitInvoiceForm)">{{'projects.labels.lengthMsg'
                          | translate}}</div>

                    <!-- <div class="text-danger" *ngIf="manageInvoiceForm.controls['freelancerPayeeInfo'].controls['clabe']?.errors?.checkRequired && (manageInvoiceForm.controls['freelancerPayeeInfo'].controls['clabe'].touched || submitInvoiceForm)">{{'pages.errorMessages.fieldRequired'|
                            translate}}
                          </div> -->

                    <div class="text-danger"
                      *ngIf="manageInvoiceForm.controls['freelancerPayeeInfo'].controls['clabe']?.errors?.checkRequired && submitInvoiceForm">{{'pages.errorMessages.fieldRequired'|
                          translate}}
                    </div>
                  </div>

                </div>
                <div class="col-md-4">
                  <label class="col-md-12 col-xs-12 col-sm-12">{{'common.labels.taxIdRFC' | translate}}
                    <span style="color:red;">*</span>
                  </label>

                  <div class="col-md-12 col-lg-12">
                    <input class="form-control" formControlName="taxId"
                      placeholder="{{'common.labels.taxIdRFC'| translate}}" />
                    <div class="text-danger"
                      *ngIf="manageInvoiceForm.controls['talentPayeeInfo'].controls['taxId']?.errors?.checkRequired && (manageInvoiceForm.controls['talentPayeeInfo'].controls['taxId'].touched || submitInvoiceForm)">{{'pages.errorMessages.fieldRequired'|
                          translate}}
                    </div>
                  </div>

                </div>

              </div>
            </div>
            <div class="form-group">
              <div class="row">
                <div class="col-md-4">
                  <label class="col-md-12 col-xs-12 col-sm-12">{{'actors.freelancers.labels.address'| translate}}
                    <span style="color:red;">*</span>
                  </label>

                  <div class="col-md-12 col-lg-12">
                    <!-- <input class="form-control" formControlName="address"
                        placeholder="{{'actors.freelancers.labels.address'| translate}}" /> -->
                    <textarea name="address" class="form-control" formControlName="address"
                      placeholder="{{'talent.individuals.labels.address' | translate}}"></textarea>
                    <div class="text-danger"
                      *ngIf="manageInvoiceForm.controls['talentPayeeInfo'].controls['address']?.errors?.checkRequired && (manageInvoiceForm.controls['talentPayeeInfo'].controls['address'].touched || submitInvoiceForm)">{{'pages.errorMessages.fieldRequired'|
                        translate}}
                    </div>
                  </div>

                </div>
              </div>
            </div>

          </ng-container>
          <ng-container formGroupName="locationPayeeInfo"
            *ngIf="poData?.payeeAccountInfoFor == PURCHASE_ORDER_TYPE.location">
            <div class="form-group">
              <div class="row">
                <div class="col-md-4">
                  <label class="col-md-12 col-xs-12 col-sm-12">{{'actors.freelancers.labels.accNumber'| translate}}
                    <span style="color:red;">*</span>
                  </label>

                  <div class="col-md-12 col-lg-12">
                    <input class="form-control" oninput="this.value = this.value.replace(/[^0-9]/g, '');"
                      formControlName="accountNumber"
                      placeholder="{{'actors.freelancers.labels.accNumber'| translate}}" />
                    <div class="text-danger"
                      *ngIf="manageInvoiceForm.controls['locationPayeeInfo'].controls['accountNumber']?.errors?.checkRequired && (manageInvoiceForm.controls['locationPayeeInfo'].controls['accountNumber'].touched || submitInvoiceForm)">{{'pages.errorMessages.fieldRequired'|
                      translate}}
                    </div>
                  </div>

                </div>
                <div class="col-md-4">
                  <label class="col-md-12 col-xs-12 col-sm-12">{{'actors.freelancers.labels.bankname'| translate}}
                    <span style="color:red;">*</span>
                  </label>

                  <div class="col-md-12 col-lg-12">
                    <input class="form-control" formControlName="bankName"
                      placeholder="{{'actors.freelancers.labels.bankname'| translate}}" />
                    <div class="text-danger"
                      *ngIf="manageInvoiceForm.controls['locationPayeeInfo'].controls['bankName']?.errors?.checkRequired && (manageInvoiceForm.controls['locationPayeeInfo'].controls['bankName'].touched || submitInvoiceForm)">{{'pages.errorMessages.fieldRequired'|
                      translate}}
                    </div>
                  </div>

                </div>
              </div>
            </div>
            <div class="form-group">
              <div class="row">
                <div class="col-md-4">
                  <label class="col-md-12 col-xs-12 col-sm-12">{{'actors.freelancers.labels.branch'| translate}}
                    <span style="color:red;">*</span>
                  </label>

                  <div class="col-md-12 col-lg-12">
                    <input class="form-control" formControlName="branch"
                      placeholder="{{'actors.freelancers.labels.branch'| translate}}" />
                    <div class="text-danger"
                      *ngIf="manageInvoiceForm.controls['locationPayeeInfo'].controls['branch']?.errors?.checkRequired && (manageInvoiceForm.controls['locationPayeeInfo'].controls['branch'].touched || submitInvoiceForm)">{{'pages.errorMessages.fieldRequired'|
                      translate}}
                    </div>
                  </div>

                </div>
                <div class="col-md-4">
                  <label class="col-md-12 col-xs-12 col-sm-12">{{'actors.freelancers.labels.address'| translate}}
                    <span style="color:red;">*</span>
                  </label>

                  <div class="col-md-12 col-lg-12">
                    <!-- <input class="form-control" formControlName="address"
                      placeholder="{{'actors.freelancers.labels.address'| translate}}" /> -->
                    <textarea name="address" class="form-control" formControlName="address"
                      placeholder="{{'talent.individuals.labels.address' | translate}}"></textarea>
                    <div class="text-danger"
                      *ngIf="manageInvoiceForm.controls['locationPayeeInfo'].controls['address']?.errors?.checkRequired && (manageInvoiceForm.controls['locationPayeeInfo'].controls['address'].touched || submitInvoiceForm)">{{'pages.errorMessages.fieldRequired'|
                      translate}}
                    </div>
                  </div>

                </div>
              </div>
            </div>
            <div class="form-group">
              <div class="row">

                <div class="col-md-4">
                  <label class="col-md-12 col-xs-12 col-sm-12">{{'actors.freelancers.labels.clabe'| translate}}
                    <span style="color:red;">*</span>
                  </label>

                  <div class="col-md-12 col-lg-12">
                    <input class="form-control" formControlName="clabe"
                      oninput="this.value = this.value.replace(/[^0-9]/g, '');" minlength="18" maxlength="18"
                      placeholder="{{'actors.freelancers.labels.clabe'| translate}}" />
                    <div class="text-danger"
                      *ngIf="manageInvoiceForm.controls['locationPayeeInfo'].controls['clabe']?.errors && (manageInvoiceForm.controls['locationPayeeInfo'].controls['clabe'].touched || submitInvoiceForm)">{{'projects.labels.lengthMsg'
                      | translate}}</div>
                    <div class="text-danger"
                      *ngIf="manageInvoiceForm.controls['locationPayeeInfo'].controls['clabe']?.errors?.checkRequired && (manageInvoiceForm.controls['locationPayeeInfo'].controls['clabe'].touched || submitInvoiceForm)">{{'pages.errorMessages.fieldRequired'|
                      translate}}
                    </div>
                  </div>

                </div>
                <div class="col-md-4" *ngIf="poData.isScouterBeneficiary">
                  <label class="col-md-12 col-xs-12 col-sm-12">{{'common.labels.taxIdRFC' | translate}}
                    <span style="color:red;">*</span>
                  </label>

                  <div class="col-md-12 col-lg-12">
                    <input class="form-control" formControlName="taxId"
                      placeholder="{{'common.labels.taxIdRFC' | translate}}" />
                    <div class="text-danger"
                      *ngIf="manageInvoiceForm.controls['locationPayeeInfo'].controls['taxId']?.errors?.checkRequired && (manageInvoiceForm.controls['locationPayeeInfo'].controls['taxId'].touched || submitInvoiceForm)">{{'pages.errorMessages.fieldRequired'|
                      translate}}
                    </div>
                  </div>

                </div>

              </div>
            </div>
          </ng-container>

        </div>

        <div class="form-group">
          <div class="col-md-12 table-responsive" style="border-top: 0px;">

            <table class="table table-bordered text-center" style="width:100%;">
              <thead>
                <tr>
                  <th>#</th>
                  <th>{{'projects.labels.paymentOrderNo'| translate}}</th>

                  <th>{{'projects.labels.paymentOrderDate1'| translate}}</th>
                  <th>{{'projects.labels.paymentOrderAmount'| translate}}</th>
                  <th>{{'projects.labels.status'| translate}}</th>
                  <th>{{'projects.labels.action'| translate}}</th>

                </tr>
              </thead>
              <tbody>
                <tr *ngIf="invoicesHistory?.length == 0" style="text-align:center">
                  <td colspan="6">
                    <span class="bb-error">{{'projects.labels.noInvHistory'| translate}}</span>
                  </td>
                </tr>
                <tr *ngFor="let item of invoicesHistory;let i = index;">
                  <td>{{i+1}}</td>
                  <td>{{item?.invoiceNumber}}</td>
                  <td>
                    <ng-container *ngIf="item.invoiceDate">{{item.invoiceDate | dateFormat}}</ng-container>
                    <ng-container *ngIf="!item.invoiceDate"> - </ng-container>
                  </td>
                  <td>
                    <ng-container *ngIf="item.invoiceAmount || item.invoiceAmount == 0">{{item?.invoiceAmount}}
                    </ng-container>
                    <ng-container *ngIf="!item.invoiceAmount && item.invoiceAmount != 0"> - </ng-container>
                  </td>
                  <td>
                    <ng-container *ngIf="item.status == INVOICE_STATUS[0].id">{{'payments.labels.' +
                      INVOICE_STATUS[0].text |
                      translate}}</ng-container>
                    <ng-container *ngIf="item.status == INVOICE_STATUS[1].id">{{'payments.labels.' +
                      INVOICE_STATUS[1].text |
                      translate}}</ng-container>
                    <ng-container *ngIf="item.status == INVOICE_STATUS[2].id">{{'payments.labels.' +
                      INVOICE_STATUS[2].text |
                      translate}}</ng-container>
                    <ng-container *ngIf="item.status == INVOICE_STATUS[3].id">{{'payments.labels.' +
                      INVOICE_STATUS[3].text |
                      translate}}</ng-container>
                    <ng-container *ngIf="item.status == INVOICE_STATUS[4].id">{{'payments.labels.' +
                      INVOICE_STATUS[4].text |
                      translate}}</ng-container>
                    <ng-container *ngIf="!item.status && item.status != 0"> - </ng-container>
                  </td>
                  <td>
                    <a style="color: #656565;text-decoration:none;" *ngIf="item?.invoiceFile?.url" data-toggle="tooltip"
                      data-placement="top" title="{{'projects.labels.invoice'| translate}}"
                      href="{{item?.invoiceFile?.url}}">
                      <i class="fa fa-download ml-1"></i>
                    </a>
                    <span *ngIf="!item?.invoiceFile?.url">-</span>
                  </td>
                </tr>
                <tr *ngIf="invoicesHistory?.length != 0">
                  <td colspan="1"> {{'projects.labels.totalPaymentOrderAmount' | translate}}</td>
                  <td colspan="2"></td>
                  <td>
                    {{invoiceHistoryTotal}} {{poData.currencyCode?poData.currencyCode:'-'}}
                  </td>
                  <td colspan="2"></td>

                </tr>
              </tbody>
            </table>


          </div>
        </div>
        <div class="form-group">
          <div class="row">
            <div class="col-md-4">
              <label class="col-md-12 col-xs-12 col-sm-12">{{'projects.labels.paymentOrderNo'| translate}}
                <span style="color:red;">*</span>
              </label>

              <div class="col-md-12">
                <input type="text" formControlName="invoiceNo"
                  placeholder="{{'projects.labels.paymentOrderNo'| translate}}" class="form-control">
                <div class="text-danger"
                  *ngIf="manageInvoiceForm.controls['invoiceNo']?.errors?.checkRequired && (manageInvoiceForm.controls['invoiceNo'].touched || submitInvoiceForm)">{{'pages.errorMessages.fieldRequired'|
                  translate}}
                </div>
              </div>

            </div>
            <!-- <div class="col-md-4">
              <label class="col-md-12 col-xs-12 col-sm-12">{{'projects.labels.invoiceType'| translate}}
  
              </label>
              <div class="row">
                <div class="col-md-6">
                  <div class="col-md-12">
                    <input type="radio" formControlName="invoiceType" id="advance" value="1">
                    <label for="advance" class="ml-1">{{'projects.labels.advance'| translate}}</label>
                  </div>
                </div>
                <div class="col-md-6">
                  <div class="col-md-12">
                    <input type="radio" formControlName="invoiceType" id="regular" value="2">
                    <label for="regular" class="ml-1">{{'projects.labels.regular'| translate}}</label>
                  </div>
                </div>
              </div>
            </div> -->

          </div>
        </div>
        <div class="form-group">
          <div class="row">

            <div class="col-md-4">
              <label class="col-md-12 col-xs-12 col-sm-12">{{'projects.labels.paymentOrderDate1'| translate}}

              </label>

              <div class="col-md-12">
                <my-date-picker class="bbdate" [options]="datePickerOptions" formControlName="invoiceDate"
                  placeholder="{{'projects.labels.paymentOrderDate1'| translate}}"></my-date-picker>
              </div>

            </div>
            <div class="col-md-4">
              <label class="col-md-12 col-xs-12 col-sm-12">{{'projects.labels.paymentDate'| translate}}

              </label>

              <div class="col-md-12">
                <my-date-picker class="bbdate" [options]="datePickerOptions" formControlName="paymentDate"
                  placeholder="{{'projects.labels.paymentDate'| translate}}"></my-date-picker>
              </div>

            </div>
          </div>
        </div>
        <!--new invoice amount & percentage code-->
        <div class="col-md-12">
          <h5>
            <strong>{{'projects.labels.inputSelectionType'| translate}}</strong>
          </h5>
        </div>
        <div class="form-group">
          <div class="col-md-12">
            <span>
              <label class="ptr">
                <input type="radio" class="ptr" [value]="CALCULATION_TYPES.amount" selected="true"
                  formControlName="calculationType">
                {{'common.labels.amount'| translate}}</label>
            </span>
            <span class="ml-2">
              <label class="ptr">
                <input type="radio" class="ptr" [value]="CALCULATION_TYPES.percentage"
                  formControlName="calculationType">
                {{'common.labels.percentage'| translate}}</label>
            </span>
          </div>
        </div>
        <ng-container *ngIf="poData?.purchaseOrderFor!== PURCHASE_ORDER_CONST.talent">
          <div class="form-group">
            <ng-container
              *ngIf="(manageInvoiceForm?.value?.calculationType ===CALCULATION_TYPES.amount);else percentageBlock">
              <div class="row">
                <div class="col-md-4">
                  <label class="col-md-12 col-xs-12 col-sm-12">{{'projects.labels.paymentOrderAmount'| translate}}
                    <span style="color:red;">*</span>
                  </label>

                  <div class="col-md-12">
                    <input type="text" id="invoiceAmount" oninput="this.value = this.value.replace(/[^0-9.]/g, '');"
                      (keyup)="updateSubtotal()" formControlName="invoiceAmount"
                      placeholder="{{'projects.labels.paymentOrderAmount'| translate}}" class="form-control ng-invalid">
                    <div class="text-danger"
                      *ngIf="manageInvoiceForm.controls['invoiceAmount']?.errors?.checkRequired && (manageInvoiceForm.controls['invoiceAmount'].touched || submitInvoiceForm)">{{'pages.errorMessages.fieldRequired'|
                          translate}}
                    </div>
                    <div class="text-danger"
                      *ngIf="!manageInvoiceForm.controls['invoiceAmount']?.errors?.checkRequired && manageInvoiceForm.controls['invoiceAmount']?.errors?.checkDecimal && (manageInvoiceForm.controls['invoiceAmount'].touched || submitInvoiceForm) && manageInvoiceForm.controls['invoiceAmount'].dirty">{{'pages.errorMessages.validDecimal'|
                          translate}}
                    </div>
                    <div class="text-danger"
                      *ngIf="!manageInvoiceForm.controls['invoiceAmount']?.errors?.checkDecimal && !manageInvoiceForm.controls['invoiceAmount']?.errors?.checkRequired && showMsg">
                      {{'projects.labels.invMsg'|translate}}
                    </div>
                  </div>

                </div>
                <div class="col-md-4">
                  <label class="col-md-12 col-xs-12 col-sm-12">{{'projects.labels.paymentOrderPercentage'| translate}}
                    (%)
                  </label>

                  <div class="col-md-12">
                    {{ manageInvoiceForm?.value?.invoicePercentage | twoDecimal}}
                  </div>

                </div>
              </div>

            </ng-container>
            <ng-template #percentageBlock>
              <div class="row">
                <div class="col-md-4">
                  <label class="col-md-12 col-xs-12 col-sm-12">{{'projects.labels.paymentOrderPercentage'| translate}}
                    (%) <span style="color:red;">*</span>
                  </label>

                  <div class="col-md-12">
                    <input type="text" id="invoicePercentage" oninput="this.value = this.value.replace(/[^0-9.]/g, '');"
                      (keyup)="updateInvoiceAmt()" formControlName="invoicePercentage"
                      placeholder="{{'projects.labels.paymentOrderPercentage'| translate}} (%)" class="form-control">
                    <div class="text-danger"
                      *ngIf="manageInvoiceForm.controls['invoicePercentage']?.errors?.checkRequired && (manageInvoiceForm.controls['invoicePercentage'].touched || submitInvoiceForm)">{{'pages.errorMessages.fieldRequired'|
                          translate}}
                    </div>
                    <div class="text-danger"
                      *ngIf="manageInvoiceForm.controls['invoicePercentage']?.errors?.checkDecimal && (manageInvoiceForm.controls['invoicePercentage'].touched) && manageInvoiceForm.controls['invoicePercentage'].dirty">{{'pages.errorMessages.validDecimal'|
                            translate}}
                    </div>
                    <div class="text-danger"
                      *ngIf="!manageInvoiceForm.controls['invoiceAmount']?.errors?.checkDecimal && !manageInvoiceForm.controls['invoiceAmount']?.errors?.checkRequired && showMsg">
                      {{'projects.labels.invMsg'|translate}}
                    </div>
                  </div>
                </div>
                <div class="col-md-4">
                  <label class="col-md-12 col-xs-12 col-sm-12">{{'projects.labels.paymentOrderAmount'| translate}}

                  </label>

                  <div class="col-md-12">
                    {{manageInvoiceForm?.value?.invoiceAmount | twoDecimal}}
                  </div>

                </div>

              </div>
            </ng-template>
          </div>
        </ng-container>
        <ng-container *ngIf="poData?.purchaseOrderFor === PURCHASE_ORDER_CONST.talent">
          <div class="form-group">
            <ng-container
              *ngIf="(manageInvoiceForm?.value?.calculationType ===CALCULATION_TYPES.amount);else percentageBlock">
              <div class="row">
                <div class="col-md-4">
                  <label class="col-md-12 col-xs-12 col-sm-12">{{'projects.labels.paymentOrderAmount'| translate}}
                    <span style="color:red;">*</span>
                  </label>

                  <div class="col-md-12">
                    <input type="text" id="invoiceAmount" oninput="this.value = this.value.replace(/[^0-9.]/g, '');"
                      (keyup)="updateTotalTalent();calculateAllAmounts();" formControlName="invoiceAmount"
                      placeholder="{{'projects.labels.paymentOrderAmount'| translate}}" class="form-control ng-invalid">
                    <div class="text-danger"
                      *ngIf="manageInvoiceForm.controls['invoiceAmount']?.errors?.checkRequired && (manageInvoiceForm.controls['invoiceAmount'].touched || submitInvoiceForm)">{{'pages.errorMessages.fieldRequired'|
                          translate}}
                    </div>
                    <div class="text-danger"
                      *ngIf="!manageInvoiceForm.controls['invoiceAmount']?.errors?.checkRequired && manageInvoiceForm.controls['invoiceAmount']?.errors?.checkDecimal && (manageInvoiceForm.controls['invoiceAmount'].touched || submitInvoiceForm) && manageInvoiceForm.controls['invoiceAmount'].dirty">{{'pages.errorMessages.validDecimal'|
                          translate}}
                    </div>
                    <div class="text-danger"
                      *ngIf="!manageInvoiceForm.controls['invoiceAmount']?.errors?.checkDecimal && !manageInvoiceForm.controls['invoiceAmount']?.errors?.checkRequired && showMsg">
                      {{'projects.labels.invMsg'|translate}}
                    </div>
                  </div>

                </div>
                <div class="col-md-4">
                  <label class="col-md-12 col-xs-12 col-sm-12">{{'projects.labels.paymentOrderPercentage'| translate}}
                    (%)
                  </label>

                  <div class="col-md-12">
                    {{ manageInvoiceForm?.value?.invoicePercentage | twoDecimal}}
                  </div>

                </div>
              </div>

            </ng-container>
            <ng-template #percentageBlock>
              <div class="row">
                <div class="col-md-4">
                  <label class="col-md-12 col-xs-12 col-sm-12">{{'projects.labels.paymentOrderPercentage'| translate}}
                    (%) <span style="color:red;">*</span>
                  </label>

                  <div class="col-md-12">
                    <input type="text" id="invoicePercentage" oninput="this.value = this.value.replace(/[^0-9.]/g, '');"
                      (keyup)="updateInvoiceAmountTalent();calculateAllAmounts();" formControlName="invoicePercentage"
                      placeholder="{{'projects.labels.paymentOrderPercentage'| translate}} (%)" class="form-control">
                    <div class="text-danger"
                      *ngIf="manageInvoiceForm.controls['invoicePercentage']?.errors?.checkRequired && (manageInvoiceForm.controls['invoicePercentage'].touched || submitInvoiceForm)">{{'pages.errorMessages.fieldRequired'|
                          translate}}
                    </div>
                    <div class="text-danger"
                      *ngIf="manageInvoiceForm.controls['invoicePercentage']?.errors?.checkDecimal && (manageInvoiceForm.controls['invoicePercentage'].touched) && manageInvoiceForm.controls['invoicePercentage'].dirty">{{'pages.errorMessages.validDecimal'|
                            translate}}
                    </div>
                    <div class="text-danger"
                      *ngIf="!manageInvoiceForm.controls['invoiceAmount']?.errors?.checkDecimal && !manageInvoiceForm.controls['invoiceAmount']?.errors?.checkRequired && showMsg">
                      {{'projects.labels.invMsg'|translate}}
                    </div>
                  </div>

                </div>
                <div class="col-md-4">
                  <label class="col-md-12 col-xs-12 col-sm-12">{{'projects.labels.paymentOrderAmount'| translate}}

                  </label>

                  <div class="col-md-12">
                    {{manageInvoiceForm?.value?.invoiceAmount | twoDecimal}}
                  </div>

                </div>

              </div>
            </ng-template>
          </div>
          <div class="form-group">
            <div class="row">
              <div class="col-md-4">
                <label class="col-md-12 col-xs-12 col-sm-12">{{'projects.labels.agengyFee'| translate}} (%)

                </label>
                <div class="col-md-12">
                  <input type="text" placeholder="{{'projects.labels.agengyFee' | translate}}"
                    oninput="this.value = this.value.replace(/[^0-9.]/g,'');" (blur)="setValueZero('percentAgencyFee')" formControlName="percentAgencyFee"
                    (keyup)="checkIntegerValue('percentAgencyFee');calculateAllAmounts()" 
                    (change)="updateInput('percentAgencyFee')" class="form-control">
                    <div class="text-danger"
                    *ngIf="manageInvoiceForm.controls['percentAgencyFee']?.errors?.checkUptoFourDecimal && (manageInvoiceForm.controls['percentAgencyFee'].touched) && manageInvoiceForm.controls['percentAgencyFee'].dirty">{{'pages.errorMessages.validFourDecimal'|
              translate}}</div>
                </div>

              </div>
              <div class="col-md-4">
                <label class="col-md-12 col-xs-12 col-sm-12">{{'projects.labels.agengyFeeAmount'| translate}}

                </label>

                <div class="col-md-12">
                  <span class="mr-2">{{agencyFeeAmount ? (agencyFeeAmount | twoDecimal) : 0.00}}</span>
                  <!-- <span>{{defaultCurrency.name}}</span> -->
                </div>

              </div>
            </div>
          </div>
          <div class="form-group">
            <div class="row">
              <div class="col-md-4">

                <label class="col-md-12 col-xs-12 col-sm-12">{{'projects.labels.iva'| translate}} (%)

                </label>
                <div class="col-md-12">
                  <input type="text" placeholder="{{'projects.labels.iva' | translate}}"
                    oninput="this.value = this.value.replace(/[^0-9.]/g,'');" (blur)="setValueZero('iva')" formControlName="iva"
                    (keyup)="checkIntegerValue('iva');calculateAllAmounts()" (change)="updateInput('iva')"
                    class="form-control">
                    <div class="text-danger"
                    *ngIf="manageInvoiceForm.controls['iva']?.errors?.checkUptoFourDecimal && (manageInvoiceForm.controls['iva'].touched) && manageInvoiceForm.controls['iva'].dirty">{{'pages.errorMessages.validFourDecimal'|
              translate}}</div>
                </div>

              </div>
              <div class="col-md-4">
                <label class="col-md-12 col-xs-12 col-sm-12">{{'projects.labels.ivaAmount'| translate}}

                </label>

                <div class="col-md-12">
                  <span class="mr-2">{{ivaAmount ? (ivaAmount | twoDecimal) : 0.00}}</span>
                  <!-- <span>{{defaultCurrency.name}}</span> -->
                </div>

              </div>
            </div>
          </div>
          <div class="form-group">
            <div class="row">
              <div class="col-md-4">
                <label class="col-md-12 col-xs-12 col-sm-12">{{'projects.labels.markup'| translate}} (%)

                </label>
                <div class="col-md-12">
                  <input type="text" placeholder="{{'projects.labels.markup' | translate}}"
                    oninput="this.value = this.value.replace(/[^0-9.]/g,'');" formControlName="percentMarkup"
                    (keyup)="checkIntegerValue('percentMarkup');calculateAllAmounts()"
                    (change)="updateInput('percentMarkup')" (blur)="setValueZero('percentMarkup')" class="form-control">
                  <div class="text-danger"
                    *ngIf="manageInvoiceForm.controls['percentMarkup']?.errors?.checkUptoFourDecimal && (manageInvoiceForm.controls['percentMarkup'].touched) && manageInvoiceForm.controls['percentMarkup'].dirty">{{'pages.errorMessages.validFourDecimal'|
              translate}}</div>
                </div>

              </div>
              <div class="col-md-4">
                <label class="col-md-12 col-xs-12 col-sm-12">{{'projects.labels.markupAmount'| translate}}

                </label>

                <div class="col-md-12">
                  <span class="mr-2">{{markupAmount ? (markupAmount | twoDecimal) : 0.00}}</span>
                  <!-- <span>{{defaultCurrency.name}}</span> -->
                </div>

              </div>
            </div>
          </div>
          <div class="form-group">
            <div class="row">
              <div class="col-md-4">
                <label class="col-md-12 col-xs-12 col-sm-12">{{'projects.labels.total'| translate}}

                </label>
                <div class="col-md-12">
                  {{totalAmount ? (totalAmount | twoDecimal) : 0.00}}

                </div>
              </div>
            </div>
          </div>
        </ng-container>
        <div class="form-group" *ngIf="poData?.purchaseOrderFor!= PURCHASE_ORDER_CONST.talent">
          <div class="col-md-12" *ngIf="poData?.purchaseOrderFor!=PURCHASE_ORDER_CONST.location">
            <label>{{'projects.labels.cfdiType'| translate}}:</label>
            <strong *ngIf="poData?.cfdiType == CFDI_CONST.factura"> {{'projects.labels.factura'| translate}}</strong>
            <strong *ngIf="poData?.cfdiType == CFDI_CONST.honorarious">
              {{'projects.labels.honorarious'| translate}}</strong>
          </div>
        </div>
        <div class="form-group" *ngIf="poData?.purchaseOrderFor!=PURCHASE_ORDER_CONST.talent">
          <div class="row">
            <div class="col-md-3">
              <label class="col-md-12 col-lg-12">{{'projects.labels.vat'| translate}} (%)
              </label>
              <div class="col-md-12 col-lg-12">
                <input type="text" (blur)="setValueZero('invoiceVat')" oninput="this.value = this.value.replace(/[^0-9.]/g, '');"
                  (keyup)="updateSubtotal();" formControlName="invoiceVat" class="form-control">
              </div>
            </div>
            <div class="col-md-4">
              <label class="col-md-12 col-xs-12 col-sm-12">{{'projects.labels.subTotal'| translate}}
              </label>
              <div class="row col-xs-12 col-sm-8">
                <div class="col-md-9">
                  {{subTotal | twoDecimal}}
                </div>
              </div>
            </div>
          </div>
          <div class="col-md-12">
            <div class="text-danger"
              *ngIf="manageInvoiceForm.controls['invoiceVat']?.errors?.checkUptoFourDecimal && (manageInvoiceForm.controls['invoiceVat'].touched) && manageInvoiceForm.controls['invoiceVat'].dirty">{{'pages.errorMessages.validFourDecimal'|
              translate}}
            </div>
          </div>
        </div>
        <div class="form-group" *ngIf="showIsrOrVatWithholding">
          <div class="row">
            <div class="col-md-3">
              <label class="col-md-12 col-lg-12">{{'projects.labels.isrWithholding'| translate}} (%)
              </label>
              <div class="col-md-12 col-lg-12">
                <input type="text" oninput="this.value = this.value.replace(/[^0-9.]/g, '');"
                  (keyup)="updateISRWitholding();updatePayableAmount();" (blur)="setValueZero('invoiceISRWitholding')" formControlName="invoiceISRWitholding"
                  class="form-control">
              </div>
            </div>
            <div class="col-md-4">
              <label class="col-md-12 col-xs-12 col-sm-12">{{'common.labels.amount'| translate}}
              </label>
              <div class="col-md-12">
                <span>{{isrWitholdingAmt | twoDecimal}}</span>
              </div>
            </div>
          </div>
          <div class="col-md-12">
            <div class="text-danger"
              *ngIf="manageInvoiceForm.controls['invoiceISRWitholding']?.errors?.checkUptoFourDecimal && (manageInvoiceForm.controls['invoiceISRWitholding'].touched) && manageInvoiceForm.controls['invoiceISRWitholding'].dirty">{{'pages.errorMessages.validFourDecimal'|
              translate}}
            </div>
          </div>
        </div>

        <div class="form-group"
          *ngIf="showIsrOrVatWithholding && (poData?.purchaseOrderFor!= PURCHASE_ORDER_CONST.talent)">
          <div class="row">
            <div class="col-md-3">
              <label class="col-md-12 col-lg-12">{{'projects.labels.vatWithholding'| translate}} (%)
              </label>
              <div class="col-md-12 col-lg-12">
                <input type="text" (blur)="setValueZero('invoiceVATWitholding')" oninput="this.value = this.value.replace(/[^0-9.]/g, '');"
                  (keyup)="updateVatWitholding();updatePayableAmount();" formControlName="invoiceVATWitholding"
                  class="form-control">
              </div>
            </div>
            <div class="col-md-4">
              <label class="col-md-12 col-xs-12 col-sm-12">{{'common.labels.amount'| translate}}
              </label>
              <div class="col-md-12">
                <span>{{vatWitholdingAmt | twoDecimal}}</span>
              </div>
            </div>
          </div>
          <div class="col-md-12">
            <div class="text-danger"
              *ngIf="manageInvoiceForm.controls['invoiceVATWitholding']?.errors?.checkUptoFourDecimal && (manageInvoiceForm.controls['invoiceVATWitholding'].touched) && manageInvoiceForm.controls['invoiceVATWitholding'].dirty">{{'pages.errorMessages.validFourDecimal'|
              translate}}
            </div>
          </div>
        </div>
        <div class="form-group" *ngIf="poData?.purchaseOrderFor!== PURCHASE_ORDER_CONST.talent">
          <div class="row no-mg mt-3">
            <div class="col-md-3">
              <label><b>{{'projects.labels.total'|
                  translate}}</b></label>
              <div class="mt-5">
                <span class="mr-2">{{payableAmount | twoDecimal :0.00}}</span>
                <!-- <span>{{selectedCurrency}}</span> -->
              </div>
            </div>
          </div>
        </div>
        <div class="form-group">
          <div class="row">
            <div class="col-md-4">
              <label class="col-md-12 col-xs-12 col-sm-12">{{'projects.labels.notes'| translate}}
              </label>

              <div class="col-md-12">
                <textarea class="form-control" placeholder="{{'projects.labels.notes'| translate}}"
                  formControlName="notes" rows="3"></textarea>
              </div>
            </div>
          </div>
        </div>
        <div class="form-group">
          <div class="col-md-12">
            <div class="panel panel-primary">
              <div class="panel-heading document-panel">
                <!-- <h5 class="text-dark">
                  <strong class="col-md-2 col-xs-2 col-sm-2"> {{'projects.labels.attachments'| translate}}
                    <span class="bb-error mandatory"> *</span>
                  </strong>
                  <em class="pull-right d-inline-flex">
                    <div class="small f-italic mr-15 mt-10" style="text-align: right;">{{'common.labels.documentTypes' | translate}}
                    </div>
                    <label for="file2" class="file-upload">
                      <button class="btn btn-default">{{'common.labels.browse'| translate}}</button>
                      <input id="file2" type="file" title="{{'common.labels.noFileChosen' | translate}}" accept="{{ACCEPT_ATTACHMENT_FILE_FORMATS}}"
                        multiple ng2FileSelect [uploader]="invoiceAttachments" (change)="addFiles($event)" />
                    </label>
  
                  </em>
                </h5> -->
                <div class="row col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 no-mg">
                  <div class="col-12 col-sm-3 col-md-3 col-lg-3 col-xl-3 no-mg">
                    <h5 class="text-dark">
                      <strong>{{'projects.labels.attachments'| translate}} <span style="color:red;">*</span>
                      </strong>
                    </h5>
                  </div>
                  <div class="col-12 col-sm-9 col-md-9 col-lg-9 col-xl-9 no-mg text-right"
                    *ngIf="showBrowseButton && enableSaveButtonFlag">
                    <label for="file2" class="file-upload m-0">
                      <em class="text-right text-dark pr-10">
                        <span class="small f-italic">
                          {{'common.labels.documentTypes' | translate}}
                        </span>
                      </em>
                      <button class="btn btn-default browse-btn" type="button">{{'common.labels.browse'| translate}}</button>
                      <input id="file2" type="file" title="{{'common.labels.noFileChosen' | translate}}"
                        accept="{{ACCEPT_ATTACHMENT_FILE_FORMATS}}" ng2FileSelect [uploader]="invoiceAttachments"
                        (change)="addFiles($event)" />
                    </label>
                  </div>
                </div>
              </div>
              <div class="panel-body">
                <div class="col-md-12">
                  <div class="row attachment-section">
                    <div class="col-md-6 dropZone">
                      <div ng2FileDrop [uploader]="invoiceAttachments" class="my-drop-zone dropzone">
                        <!-- <div class="text-danger col-md-12 no-mg mb-10 ng-invalid" *ngIf="editUserForm.controls['ttDocument']?.errors?.checkRequired &&  (editUserForm.controls['ttDocument'].touched  ||submmitedFormFlag)">{{'actors.freelancers.errorMessages.documentRequired'| translate}}</div> -->
                        <div class="attachUpload" *ngIf="invoiceAttachments.queue.length > 0">
                          <div class="listItem mb-2" *ngFor="let item of invoiceAttachments.queue;let i=index;">
                            <div class="row" *ngIf="item?.file !== undefined">
                              <!-- <div class="col-md-2" *ngIf="item?.url == ''">
                                    <i class="fa fa-spinner fa-spin margin-right-5" ></i>
                                </div> -->
                              <div class="col-md-10  textElipses">
                                <a class="fileName document-link" data-toggle="tooltip" data-placement="top"
                                  title="{{ item?.file?.name }}" target="_blank" *ngIf="item?.url" href="{{item.url}}"
                                  download="{{item.url}}">


                                  <i data-toggle="tooltip" data-placement="top" title="{{item?.file?.name}}"
                                    [ngClass]="item?.file?.iconType"></i>

                                  <!-- {{ item?.file?.name }}   -->
                                </a>
                                <i *ngIf="item?.url == ''" class="fa fa-spinner fa-spin margin-right-5"></i>
                              </div>
                              <div class="col-md-2">
                                <a *ngIf="item?.url" class="attachRemoveBtn btn-default">
                                  <em class="fa fa-trash text-danger" (click)="removeFiles(i, item);"></em>
                                </a>
                              </div>
                            </div>
                          </div>
                        </div>
                        <div class="bb-error" *ngIf="checkInvoiceAttachments && enableSaveButtonFlag">{{'actors.freelancers.errorMessages.fieldRequired'|
                          translate}}</div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="col-md-12 mt-3">

          <button (click)="saveInvoice()" type="submit" [disabled]="!enableSaveButtonFlag" class="btn btn-success">
            <i *ngIf="spinnerFlag" class="fa fa-spinner fa-spin margin-right-5"></i>{{'common.labels.save'| translate}}
          </button>
          <button *ngIf="!this.invoiceId" type="button" (click)="navigateTo(false)" class="btn btn-danger ml-1">{{'common.labels.cancel'|
            translate}}
          </button>
          <button *ngIf="this.invoiceId" type="button" (click)="navigateTo(true)" class="btn btn-danger ml-1">{{'common.labels.cancel'|
            translate}}
          </button>

        </div>
      </form>
    </div>
  </div>
</div>
