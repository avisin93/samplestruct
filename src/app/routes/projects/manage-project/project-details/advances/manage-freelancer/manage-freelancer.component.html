<div class="panel panel-primary">

  <div class="panel-body">


    <div class="form-group">
      <h5 class="text-dark mt-1 ml-3">
          <strong>{{'projects.labels.payAdvance'| translate}} - {{'common.labels.freelancer'| translate}}</strong>
          <button class="btn btn-primary pull-right mr-3 btl-btn" (click)="navigateTo()">{{'common.labels.backToList'| translate}}</button>
        </h5>
    </div>
    <form class="form-horizontal" [formGroup]="freelancerAdvanceForm" novalidate>
        <div class="row mt-1 no-mg">
          <div class="col-md-5 no-mg">
            <div class="form-group">
              <label class="col-md-12 col-xs-12 col-sm-8">{{'projects.labels.selectBudgetLine'| translate}}
                <span style="color:red;">*</span>
              </label>
              <div class="col-md-12 col-xs-12 col-sm-8 mt-1">
                <div style="width:132%;">
                  <ngx-select [items]="budgetLineList" placeholder="{{'common.labels.select' | translate}}"  formControlName="budgetLine" (select) = "budgetLineSelected($event)"></ngx-select>
                  <div class="text-danger col-md-12 no-mg" *ngIf="freelancerAdvanceForm.controls['budgetLine']?.errors?.checkRequired && (freelancerAdvanceForm.controls['budgetLine'].touched  || submmitedFormFlag)">{{'actors.freelancers.errorMessages.fieldRequired'| translate}}</div>

                </div>
              </div>
            </div>
          </div>
        </div>
    <div class="form-group">
      <label class="col-md-12 col-xs-12 col-sm-8">{{'projects.labels.selectFreelancer'| translate}}
        <span style="color:red;">*</span>
      </label>
      <div class="row col-xs-12 col-sm-8">
        <div class="col-md-9">
          <ngx-select [items]="freelancersList" placeholder="{{'common.labels.select' | translate}}"  formControlName="freelancerId"  (select)="freelancerSelected($event)" ></ngx-select>
          <div class="text-danger col-md-12 no-mg" *ngIf="freelancerAdvanceForm.controls['freelancerId']?.errors?.checkRequired && (freelancerAdvanceForm.controls['freelancerId'].touched  || submmitedFormFlag)">{{'actors.freelancers.errorMessages.fieldRequired'| translate}}</div>

        </div>
      </div>
    </div>

      <div class="row mt-1 no-mg">
        <div class="col-md-5 no-mg">
          <div class="form-group">
            <label class="col-md-12 col-xs-12 col-sm-8">{{'common.labels.amount'| translate}}
              <span style="color:red;">*</span>
            </label>
            <div class="col-md-12 col-xs-12 col-sm-8 mt-1">
              <div style="width:100%;">
                <input oninput="this.value = this.value.replace(/[^0-9.]/g,'');" class="form-control"  formControlName="amount" >
                <div class="text-danger col-md-12 no-mg" *ngIf="freelancerAdvanceForm.controls['amount']?.errors?.checkRequired && (freelancerAdvanceForm.controls['amount'].touched  || submmitedFormFlag)">{{'actors.freelancers.errorMessages.fieldRequired'| translate}}</div>
                <div class="text-danger" *ngIf="!freelancerAdvanceForm.controls['amount']?.errors?.checkRequired && freelancerAdvanceForm.controls['amount']?.errors?.checkDecimal && (freelancerAdvanceForm.controls['amount'].touched) && freelancerAdvanceForm.controls['amount'].dirty">{{'pages.errorMessages.validDecimal'| translate}}</div>
              </div>
            </div>
          </div>
        </div>
           <div class="col-md-5 no-mg mxn">
          <div class="form-group">
            <label class="col-md-12 col-xs-12 col-sm-8">{{defaultCurrency?.name}}
            </label>

          </div>
        </div>
      </div>
      <div class="row no-mg ">
        <div class="col-md-3">
      <label >{{'projects.labels.modeOfPayment'| translate}}
        <span style="color:red;">*</span>
      </label>
      <ngx-select [items]="modesOfOperation" placeholder="{{'common.labels.select' | translate}}" formControlName="modeOfPayment" ></ngx-select>
      <div class="text-danger col-md-12 no-mg mb-1" *ngIf="freelancerAdvanceForm.controls['modeOfPayment']?.errors?.checkRequired && (freelancerAdvanceForm.controls['modeOfPayment'].touched  || submmitedFormFlag)">{{'actors.freelancers.errorMessages.fieldRequired'| translate}}</div>

    </div>
    <div class="col-md-3 date">
        <div class="form-group">
      <label >{{'projects.labels.paymentDate'| translate}}
        <span style="color:red;">*</span>
      </label>
          <my-date-picker class="bbdate" placeholder="{{'projects.labels.paymentDate' | translate}}"  [options]="datePickerOptions"  formControlName="paymentDate" ></my-date-picker>
          <div class="text-danger col-md-12 no-mg mb-1" *ngIf="freelancerAdvanceForm.controls['paymentDate']?.errors?.checkRequired && (freelancerAdvanceForm.controls['paymentDate'].touched  || submmitedFormFlag)">{{'actors.freelancers.errorMessages.fieldRequired'| translate}}</div>

    </div>
    </div>
    </div>

    <div class="row no-mg mt-1">
      <label class="col-md-12 col-xs-12 col-sm-8">{{'projects.labels.purpose'| translate}}
        <span style="color:red;">*</span>
      </label>
      <div class="row col-xs-12 col-sm-8">
        <div class="col-md-9">
          <textarea type="text" class="form-control"  formControlName="purpose" ></textarea>
          <div class="text-danger col-md-12 no-mg" *ngIf="freelancerAdvanceForm.controls['purpose']?.errors?.checkRequired && (freelancerAdvanceForm.controls['purpose'].touched  || submmitedFormFlag)">{{'actors.freelancers.errorMessages.fieldRequired'| translate}}</div>

        </div>
      </div>
  </div>

    <div class="col-md-12 mt-3">

      <button (click)="saveAdvance()" class="btn btn-success save-btn"><i *ngIf="spinnerFlag" class="fa fa-spinner fa-spin margin-right-5" ></i>{{'common.labels.save'| translate}}</button>
      <button (click)="navigateTo()"  class="btn btn-danger ml-1 cancel-btn">{{'common.labels.cancel'| translate}}</button>

    </div>
    </form>
  </div>


</div>
