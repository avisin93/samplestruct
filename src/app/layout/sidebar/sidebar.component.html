<!-- START Sidebar (left)-->
<div class="aside-inner left-sidebar">
  <nav class="sidebar" sidebar-anyclick-close="" [class.show-scrollbar]="settings.layout.asideScrollbar">

    <!-- START sidebar nav-->
    <ul class="sidebar-nav">

      <!-- START user info-->

      <!-- START user info-->
      <li class="has-user-block">
        <div uib-collapse="userBlockVisible">
          <div class="item user-block nocursor">
            <!-- User picture-->
            <div class="user-block-picture">
              <div class="user-block-status">
                <img class="img-thumbnail img-circle" [src]="userInfo?.profilePicUrl ? userInfo.profilePicUrl:'assets/img/user-5.png'" alt="Avatar" />
                <!-- <img  class="img-thumbnail img-circle" src="assets/img/user/01.jpg" height="86" /> -->
                <!--  <div class="circle circle-success circle-lg"></div> -->
              </div>
            </div>
            <!-- Name and Job-->
            <div class="user-block-info nocursor">
              <span class="user-block-name" tooltip= "{{userInfo?.name}}">{{userInfo?.name}}</span>
              <span class="user-block-name">{{userInfo?.roleName}}</span>
              <!--   <span class="user-block-role">{{user.job}}</span> -->
              <!-- <button ng-if="userType == 2" class="mb-xs btn btn-inverse btn-xs btn-outline" (click)="$state.go('app.freelancerProfile', {id : userId})">{{'dashboard.profile' | translate}}
                               <em class="fa fa-pencil"></em>
                            </button> -->
            </div>
          </div>
        </div>
      </li>
      <!-- END user info-->
      <!-- Iterates over all sidebar items-->
      <li ng-class="getMenuItemPropClasses(item)" ng-repeat="item in menuItems" ng-if="getMenuPermission(item)" ng-init="pIndex = $index" ng-include="'sidebar-renderer.html'" ng-click="toggleCollapse(pIndex, true)"></li>

      <!-- END user info-->
      <ng-container *ngFor='let item of menuItems'>
        <li *ngIf="permissionArr[item['moduleId']] && permissionArr[item['moduleId']][ACTION_TYPES.VIEW]" [ngClass]="{'nav-heading': item.heading}" [routerLinkActive]="['active', 'opened']">
          <!-- menu heading -->
          <span *ngIf="item.heading">{{item.text | translate}}</span>
          <!-- external links -->
          <a *ngIf="!item.heading && !item.submenu && item.elink" [attr.target]="item.target" [attr.href]="item.elink" title="{{('sidebar.'+item.text | translate) || item.text}}">
                    <span class="float-right" *ngIf="item.alert" [ngClass]="item.label || 'badge badge-success'">{{item.alert}}</span>
                    <em class="{{item.icon}}" *ngIf="item.icon"></em>
                    <span>{{('sidebar.'+item.text | translate) || item.text}}</span>
                </a>
          <!-- single menu item -->
          <a *ngIf="!item.heading && !item.submenu && !item.elink" [routerLink]="item.link" [attr.route]="item.link" title="{{('sidebar.'+item.text | translate) || item.text}}" (click)="toggleSubmenuClick($event)" (mouseenter)="toggleSubmenuHover($event)">
                    <span class="float-right" *ngIf="item.alert" [ngClass]="item.label || 'badge badge-success'">{{item.alert}}</span>
                    <em class="{{item.icon}}" *ngIf="item.icon"></em>
                    <span>{{('sidebar.'+item.text | translate) || item.text}}</span>
                </a>
          <!-- has submenu -->
          <a class="parent-item" id="arrow{{item.moduleId}}" *ngIf="!item.heading && item.submenu" title="{{('sidebar.'+item.text | translate) || item.text}}" (click)="toggleSubmenuClick($event,item.moduleId);" (mouseenter)="toggleSubmenuHover($event)">
                    <span class="float-right" *ngIf="item.alert" [ngClass]="item.label || 'badge badge-success'">{{item.alert}}</span>
                    <em class="{{item.icon}}" *ngIf="item.icon"></em>
                    <span>{{('sidebar.'+item.text | translate) || item.text}}
                    </span>
                    <em class="fa fa-caret-right"></em>
                    <em class="fa fa-caret-down"></em>
                </a>
          <!-- SUBLEVEL -->
          <ul *ngIf="item.submenu" class="sidebar-nav sidebar-subnav" [routerLinkActive]="['opening']">
            <li class="sidebar-subnav-header">{{('sidebar.'+item.text | translate) || item.text}}</li>
            <ng-container *ngFor='let subitem of item.submenu'>
            <li *ngIf="permissionArr[subitem['moduleId']] && permissionArr[subitem['moduleId']][ACTION_TYPES.VIEW]" [routerLinkActive]="['active']">
              <!-- sublevel: external links -->
              <a *ngIf="!subitem.heading && !subitem.submenu && subitem.elink" [attr.target]="subitem.target" [attr.href]="subitem.elink" title="{{('sidebar.'+subitem.text | translate) || subitem.text}}">
                            <span class="float-right" *ngIf="subitem.alert" [ngClass]="subitem.label || 'badge badge-success'">{{subitem.alert}}</span>
                            <em class="{{subitem.icon}}" *ngIf="subitem.icon"></em>
                            <span>{{('sidebar.'+subitem.text | translate) || subitem.text}}</span>
                        </a>
              <!-- sublevel: single menu item  -->
              <a *ngIf="!subitem.submenu && !subitem.elink" [routerLink]="subitem.link" [attr.route]="subitem.link" title="{{('sidebar.'+subitem.text | translate) || subitem.text}}">
                            <span class="float-right" *ngIf="subitem.alert" [ngClass]="subitem.label || 'badge badge-success'">{{subitem.alert}}</span>
                            <em class="{{subitem.icon}}" *ngIf="subitem.icon"></em>
                            <span>{{('sidebar.'+subitem.text | translate) || subitem.text}}</span>
                        </a>
              <!-- sublevel: has submenu -->
              <a *ngIf="subitem.submenu" title="{{('sidebar.'+subitem.text | translate) || subitem.text}}" (click)="toggleSubmenuClick($event)" (mouseenter)="toggleSubmenuHover($event)">
                            <span class="float-right" *ngIf="subitem.alert" [ngClass]="subitem.label || 'badge badge-success'">{{subitem.alert}}</span>
                            <em class="{{subitem.icon}}" *ngIf="subitem.icon"></em>
                            <span>{{('sidebar.'+subitem.text | translate) || subitem.text}}</span>

                        </a>
              <!-- SUBLEVEL 2 -->
              <ul *ngIf="subitem.submenu" class="sidebar-nav sidebar-subnav level2" [routerLinkActive]="['opening']">
                <li *ngFor='let subitem2 of subitem.submenu' [routerLinkActive]="['active']">
                  <!-- sublevel 2: single menu item  -->
                  <a *ngIf="!subitem2.submenu" [routerLink]="subitem2.link" [attr.route]="subitem2.link" title="{{('sidebar.'+subitem2.text | translate) || subitem2.text}}">
                                    <span class="float-right" *ngIf="subitem2.alert" [ngClass]="subitem2.label || 'badge badge-success'">{{subitem2.alert}}</span>
                                    <em class="{{subitem2.icon}}" *ngIf="subitem2.icon"></em>
                                    <span>{{('sidebar.'+subitem2.text | translate) || subitem2.text}}</span>
                                </a>
                  <!-- sublevel2: has submenu -->
                  <a *ngIf="subitem2.submenu" title="{{('sidebar.'+subitem2.text | translate) || subitem2.text}}" (click)="toggleSubmenuClick($event)" (mouseenter)="toggleSubmenuHover($event)">
                                    <span class="float-right" *ngIf="subitem2.alert" [ngClass]="subitem2.label || 'badge badge-success'">{{subitem2.alert}}</span>
                                    <em class="{{subitem2.icon}}" *ngIf="subitem2.icon"></em>
                                    <span>{{('sidebar.'+subitem2.text | translate) || subitem2.text}}</span>
                                </a>
                  <!-- SUBLEVEL 3 -->
                  <ul *ngIf="subitem2.submenu" class="sidebar-nav sidebar-subnav level3" [routerLinkActive]="['opening']">
                    <li *ngFor='let subitem3 of subitem2.submenu' [routerLinkActive]="['active']">
                      <!-- sublevel 2: single menu item  -->
                      <a *ngIf="!subitem3.submenu" [routerLink]="subitem3.link" [attr.route]="subitem3.link" title="{{subitem3.text}}">
                                            <span class="float-right" *ngIf="subitem3.alert" [ngClass]="subitem3.label || 'badge badge-success'">{{subitem3.alert}}</span>
                                            <em class="{{subitem3.icon}}" *ngIf="subitem3.icon"></em>
                                            <span>{{('sidebar.'+subitem3.text | translate) || subitem3.text}}</span>
                                        </a>
                      <!-- sublevel3: has submenu -->
                      <a *ngIf="subitem3.submenu" title="{{('sidebar.'+subitem3.text | translate) || subitem3.text}}" (click)="toggleSubmenuClick($event)" (mouseenter)="toggleSubmenuHover($event)">
                                            <span class="float-right" *ngIf="subitem3.alert" [ngClass]="subitem3.label || 'badge badge-success'">{{subitem3.alert}}</span>
                                            <em class="{{subitem3.icon}}" *ngIf="subitem3.icon"></em>
                                            <span>{{('sidebar.'+subitem3.text | translate) || subitem3.text}}</span>
                                        </a>
                      <!-- SUBLEVEL 4 -->
                      <ul *ngIf="subitem3.submenu" class="sidebar-nav sidebar-subnav level3" [routerLinkActive]="['opening']">
                        <li *ngFor='let subitem4 of subitem3.submenu' [routerLinkActive]="['active']">
                          <!-- sublevel 2: single menu item  -->
                          <a *ngIf="!subitem4.submenu" [routerLink]="subitem4.link" [attr.route]="subitem4.link" title="{{('sidebar.'+subitem4.text | translate) || subitem4.text}}">
                                                    <span class="float-right" *ngIf="subitem4.alert" [ngClass]="subitem4.label || 'badge badge-success'">{{subitem4.alert}}</span>
                                                    <em class="{{subitem4.icon}}" *ngIf="subitem4.icon"></em>
                                                    <span>{{('sidebar.'+subitem4.text | translate) || subitem4.text}}</span>
                                                </a>
                        </li>
                      </ul>
                    </li>
                  </ul>
                </li>
              </ul>
            </li>
            </ng-container>
          </ul>
        </li>
      </ng-container>
    </ul>
    <!-- END sidebar nav-->

  </nav>
</div>
<!-- END Sidebar (left)-->
