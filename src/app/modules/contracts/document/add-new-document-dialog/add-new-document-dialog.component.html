<h2 mat-dialog-title>{{ textHeaderDialogDocument }}</h2>
<mat-dialog-content class="content-mat-dialog" [formGroup]="formGroup">
  <div class="row">
    <div class="col-lg-6">
      <mat-form-field class="col-md-12">
          <input placeholder="Doc title" matInput class="mat-input-element mat-form-field-autofill-control cdk-text-field-autofill-monitored"
              aria-invalid="false" aria-required="false" formControlName="inputDocumentTitle"
              name="inputDocumentTitle">
          <mat-error *ngIf="formGroup.get('inputDocumentTitle').invalid">
            {{getErrorMessage(formGroup.get('inputDocumentTitle'))}}
          </mat-error>
      </mat-form-field>
    </div>
    <div class="col-lg-5">
      <mat-form-field class="col-md-12">
        <mat-select disableOptionCentering panelClass="select-dropdown-class" placeholder="Contract Type" formControlName="selectedDocumentType" required="false">
          <mat-option *ngFor="let types of arrayDocTypes" [value]="types.code">
            {{types.name}}
          </mat-option>
        </mat-select>
        <mat-error *ngIf="formGroup.get('selectedDocumentType').invalid">
          {{getErrorMessage(formGroup.get('selectedDocumentType'))}}
        </mat-error>
      </mat-form-field>
    </div>
    <div class="col-lg-1 new-plus">
      <i class="fas fa-plus-circle fa-lg" (click)="openCreateNewObjectDialog('Contract Type')"></i>
    </div>
  </div>
  <div class="row">
    <div class="col-lg-6">
        <mat-form-field class="col-md-12 mat-form-field-has-prefix">
            <input 
              matInput
              readonly 
              formControlName="selectedStartDate" 
              placeholder="Start Date" 
              [matDatepicker]="inputStartDate"
              (dateChange)="startDateChanged($event)"
              (click)="inputStartDate.open()"
              [min]="minStartDate"
              required="false">
            <mat-datepicker-toggle matPrefix [for]="inputStartDate">
              <mat-icon matDatepickerToggleIcon class="fa fa-calendar">
              </mat-icon>
            </mat-datepicker-toggle>
            <mat-datepicker #inputStartDate></mat-datepicker>
            <mat-error *ngIf="formGroup.get('selectedStartDate').invalid">
              {{getErrorMessage(formGroup.get('selectedStartDate'), {'matDatepickerMin': 'Start date should be after signed date'}) }}
            </mat-error>
        </mat-form-field>
    </div>
    <div class="col-lg-6">
        <mat-form-field class="col-md-12 mat-form-field-has-prefix">
            <input 
              matInput
              readonly 
              formControlName="selectedSignedDate" 
              placeholder="Signed Date" 
              [matDatepicker]="inputSignedDate"
              (click)="inputSignedDate.open()"
              [max]="maxSignedDate"
              (dateChange)="signedDateChanged($event)"
              required="false">
            <mat-datepicker-toggle matPrefix [for]="inputSignedDate">
                <mat-icon matDatepickerToggleIcon class="fa fa-calendar">
                </mat-icon>
            </mat-datepicker-toggle>
            <mat-datepicker #inputSignedDate></mat-datepicker>
            <mat-error *ngIf="formGroup.get('selectedSignedDate').invalid">
              {{getErrorMessage(formGroup.get('selectedSignedDate'), {'matDatepickerMin': 'Signed date should be before start date'}) }}
            </mat-error>
        </mat-form-field>
    </div>
  </div>
  <div class="row">
    <div id="status" class="col-lg-6">
      <mat-form-field class="col-md-12">
        <mat-select disableOptionCentering panelClass="select-dropdown-class" panelClass="statusPanelClass" placeholder="Status" formControlName="selectedStatus" required="false">
          <mat-option *ngFor="let status of arrayContractStatus" [value]="status.code">
            {{status.name}}
          </mat-option>
        </mat-select>
        <mat-error *ngIf="formGroup.get('selectedStatus').invalid">
          {{getErrorMessage(formGroup.get('selectedStatus'))}}
        </mat-error>
      </mat-form-field>
    </div>
    <div class="col-lg-6">
        <mat-form-field class="col-md-12">
          <input #fileToUpload type="file" accept="application/pdf, text/plain, image/jpg, image/jpeg, image/png, application/msword, application/vnd.openxmlformats-officedocument.wordprocessingml.document" (change)="onFileChoose($event)" style="display:none;">
          <input (click)="fileToUpload.click()" readonly matInput class="mat-input-element mat-form-field-autofill-control 
          cdk-text-field-autofill-monitored" placeholder="Attachments" 
            aria-invalid="false" aria-required="false" formControlName="inputFile" name="inputFile" required="false">
            <span matSuffix *ngIf="!this.data.updateDocument">
                <label [for]="fileToUpload" (click)="fileToUpload.click()">
                    <i class="fa fa-paperclip"></i>
                </label>
             </span>
          <mat-error *ngIf="formGroup.get('inputFile').invalid">
            {{getErrorMessage(formGroup.get('inputFile'))}}
          </mat-error>
        </mat-form-field>
    </div>
  </div>
  <div class="row">
    <div class="col-lg-6">
        <mat-form-field class="col-md-12" hideRequiredMarker>
          <mat-slide-toggle class="slide-checkbox" [color] = "'primary'" (click) = "documentHasParent()" [disableControl]="hasParent" #hasParentCheckbox matPrefix></mat-slide-toggle>
          <mat-select disableOptionCentering panelClass="select-dropdown-class" panelClass="parentPanelClass" placeholder="Parent document" formControlName="selectedParentDocument" required="false">
            <mat-option *ngFor="let pd of parentDocuments" [value]="pd.documents._id" name="parentDocuments" ngDefaultControl>
              {{pd.documents.name_document_efa}}
            </mat-option>
          </mat-select>
          <mat-error *ngIf="this.hasParent && formGroup.get('selectedParentDocument').invalid">
            {{getErrorMessage(formGroup.get('selectedParentDocument'))}}
          </mat-error>
        </mat-form-field>
    </div>
    <div class="col-lg-6">
      <mat-form-field class="col-md-12" hideRequiredMarker>
        <mat-slide-toggle class="slide-checkbox" [color] = "'primary'" (click) = "documentHasChild()" [disableControl]="hasChild" #hasChildCheckbox matPrefix></mat-slide-toggle>
        <mat-select disableOptionCentering panelClass="select-dropdown-class" panelClass="childPanelClass" placeholder="Child document" formControlName="selectedChildDocument" required="false">
          <mat-option *ngFor="let cd of childDocuments" [value]="cd.documents._id" name="childDocuments" ngDefaultControl>
            {{cd.documents.name_document_efa}}
          </mat-option>
        </mat-select>
        <mat-error *ngIf="this.hasChild && formGroup.get('selectedChildDocument').invalid">
          {{getErrorMessage(formGroup.get('selectedChildDocument'))}}
        </mat-error>
      </mat-form-field>
  </div>
  </div>
  <div class="row action-button">
    <div class= "col-lg-6">      
    </div>
    <div class="col-lg-6">
        <div class="row">
          <div class="col-lg-12" style="text-align: right;">
              <button class="cm-btn" id="cancel" (click)="close()">Cancel</button>   
              <button class="cm-btn primary-pink-color" (click)="saveDocumentDialog()">Save</button>
            </div>
        </div>
    </div>  
  </div>
</mat-dialog-content>